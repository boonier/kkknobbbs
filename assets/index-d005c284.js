(function(){const k=document.createElement("link").relList;if(k&&k.supports&&k.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))w(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&w(m)}).observe(document,{childList:!0,subtree:!0});function v(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function w(o){if(o.ep)return;o.ep=!0;const d=v(o);fetch(o.href,d)}})();function N(){}function Lt(p){return p()}function wt(){return Object.create(null)}function at(p){p.forEach(Lt)}function Dt(p){return typeof p=="function"}function bt(p,k){return p!=p?k==k:p!==k||p&&typeof p=="object"||typeof p=="function"}function Ct(p){return Object.keys(p).length===0}function Nt(p,...k){if(p==null)return N;const v=p.subscribe(...k);return v.unsubscribe?()=>v.unsubscribe():v}function X(p,k,v){p.$$.on_destroy.push(Nt(k,v))}function Y(p,k,v){return p.set(v),k}function S(p,k){p.appendChild(k)}function B(p,k,v){p.insertBefore(k,v||null)}function V(p){p.parentNode&&p.parentNode.removeChild(p)}function kt(p,k){for(let v=0;v<p.length;v+=1)p[v]&&p[v].d(k)}function D(p){return document.createElement(p)}function it(p){return document.createTextNode(p)}function j(){return it(" ")}function W(p,k,v,w){return p.addEventListener(k,v,w),()=>p.removeEventListener(k,v,w)}function F(p,k,v){v==null?p.removeAttribute(k):p.getAttribute(k)!==v&&p.setAttribute(k,v)}function Yt(p){return Array.from(p.childNodes)}function yt(p,k){k=""+k,p.wholeText!==k&&(p.data=k)}function ot(p,k,v){for(let w=0;w<p.options.length;w+=1){const o=p.options[w];if(o.__value===k){o.selected=!0;return}}(!v||k!==void 0)&&(p.selectedIndex=-1)}function At(p){const k=p.querySelector(":checked");return k&&k.__value}let nt;function tt(p){nt=p}function xt(){if(!nt)throw new Error("Function called outside component initialization");return nt}function Vt(p){xt().$$.on_mount.push(p)}function Xt(p,k){return xt().$$.context.set(p,k),k}function Bt(p){return xt().$$.context.get(p)}const Z=[],st=[];let U=[];const It=[],Wt=Promise.resolve();let pt=!1;function $t(){pt||(pt=!0,Wt.then(Rt))}function rt(p){U.push(p)}const dt=new Set;let $=0;function Rt(){if($!==0)return;const p=nt;do{try{for(;$<Z.length;){const k=Z[$];$++,tt(k),Ht(k.$$)}}catch(k){throw Z.length=0,$=0,k}for(tt(null),Z.length=0,$=0;st.length;)st.pop()();for(let k=0;k<U.length;k+=1){const v=U[k];dt.has(v)||(dt.add(v),v())}U.length=0}while(Z.length);for(;It.length;)It.pop()();pt=!1,dt.clear(),tt(p)}function Ht(p){if(p.fragment!==null){p.update(),at(p.before_update);const k=p.dirty;p.dirty=[-1],p.fragment&&p.fragment.p(p.ctx,k),p.after_update.forEach(rt)}}function Zt(p){const k=[],v=[];U.forEach(w=>p.indexOf(w)===-1?k.push(w):v.push(w)),v.forEach(w=>w()),U=k}const ct=new Set;let Ut;function J(p,k){p&&p.i&&(ct.delete(p),p.i(k))}function ht(p,k,v,w){if(p&&p.o){if(ct.has(p))return;ct.add(p),Ut.c.push(()=>{ct.delete(p),w&&(v&&p.d(1),w())}),p.o(k)}else w&&w()}function lt(p){p&&p.c()}function Q(p,k,v,w){const{fragment:o,after_update:d}=p.$$;o&&o.m(k,v),w||rt(()=>{const m=p.$$.on_mount.map(Lt).filter(Dt);p.$$.on_destroy?p.$$.on_destroy.push(...m):at(m),p.$$.on_mount=[]}),d.forEach(rt)}function q(p,k){const v=p.$$;v.fragment!==null&&(Zt(v.after_update),at(v.on_destroy),v.fragment&&v.fragment.d(k),v.on_destroy=v.fragment=null,v.ctx=[])}function Kt(p,k){p.$$.dirty[0]===-1&&(Z.push(p),$t(),p.$$.dirty.fill(0)),p.$$.dirty[k/31|0]|=1<<k%31}function Ft(p,k,v,w,o,d,m,x=[-1]){const b=nt;tt(p);const u=p.$$={fragment:null,ctx:[],props:d,update:N,not_equal:o,bound:wt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(k.context||(b?b.$$.context:[])),callbacks:wt(),dirty:x,skip_bound:!1,root:k.target||b.$$.root};m&&m(u.root);let c=!1;if(u.ctx=v?v(p,k.props||{},(l,a,...s)=>{const i=s.length?s[0]:a;return u.ctx&&o(u.ctx[l],u.ctx[l]=i)&&(!u.skip_bound&&u.bound[l]&&u.bound[l](i),c&&Kt(p,l)),a}):[],u.update(),c=!0,at(u.before_update),u.fragment=w?w(u.ctx):!1,k.target){if(k.hydrate){const l=Yt(k.target);u.fragment&&u.fragment.l(l),l.forEach(V)}else u.fragment&&u.fragment.c();k.intro&&J(p.$$.fragment),Q(p,k.target,k.anchor,k.customElement),Rt()}tt(b)}class jt{$destroy(){q(this,1),this.$destroy=N}$on(k,v){if(!Dt(v))return N;const w=this.$$.callbacks[k]||(this.$$.callbacks[k]=[]);return w.push(v),()=>{const o=w.indexOf(v);o!==-1&&w.splice(o,1)}}$set(k){this.$$set&&!Ct(k)&&(this.$$.skip_bound=!0,this.$$set(k),this.$$.skip_bound=!1)}}const H=[];function K(p,k=N){let v;const w=new Set;function o(x){if(bt(p,x)&&(p=x,v)){const b=!H.length;for(const u of w)u[1](),H.push(u,p);if(b){for(let u=0;u<H.length;u+=2)H[u][0](H[u+1]);H.length=0}}}function d(x){o(x(p))}function m(x,b=N){const u=[x,b];return w.add(u),w.size===1&&(v=k(o)||N),x(p),()=>{w.delete(u),w.size===0&&v&&(v(),v=null)}}return{set:o,update:d,subscribe:m}}const Ot=K(0),ft=K(localStorage.getItem("selectedInput")||"");ft.subscribe(p=>{localStorage.setItem("selectedInput",p)});const et=K(localStorage.getItem("selectedOutput")||"");et.subscribe(p=>{localStorage.setItem("selectedOutput",p)});const Tt=K({inputs:[],outputs:[]}),vt=K([]),mt=K([]);var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jt(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var gt={},Qt={get exports(){return gt},set exports(p){gt=p}};(function(p,k){(function(w,o){p.exports=o()})(Gt,function(){return function(v){var w={};function o(d){if(w[d])return w[d].exports;var m=w[d]={exports:{},id:d,loaded:!1};return v[d].call(m.exports,m,m.exports,o),m.loaded=!0,m.exports}return o.m=v,o.c=w,o.p="",o(0)}([function(v,w,o){var d=function(x){return x&&x.__esModule?x.default:x},m=d(o(1));v.exports=m},function(v,w,o){var d=function(O){return O&&O.__esModule?O:{default:O}},m=function(O){return O&&O.__esModule?O.default:O},x=function(){function O(M,_){for(var z in _){var L=_[z];L.configurable=!0,L.value&&(L.writable=!0)}Object.defineProperties(M,_)}return function(M,_,z){return _&&O(M.prototype,_),z&&O(M,z),M}}(),b=function(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")};w.colors=A,w.context=I,w.clock=T,Object.defineProperty(w,"__esModule",{value:!0});var u=m(o(2)),c=m(o(5)),l=m(o(38)),a=m(o(40)),s=d(o(39)),i=o(28),n=o(41),t=o(27),e=o(26),r=o(25),h=m(o(42)),f=m(o(29)),g=function(){function O(M){b(this,O);for(var _ in u)this[_]=u[_];for(var _ in c)this[_]=c[_];var z={Rack:l},L={Counter:i,Radio:n,Drunk:t,Sequence:e,Matrix:r};for(var _ in L)this[_]=L[_];for(var _ in z)this[_]=z[_];var R=window.AudioContext||window.webkitAudioContext;this._context=M||new R,this.tune=new a,this.note=this.tune.note.bind(this.tune),this.clock=new h(this._context),this.clock.start(),this.Interval=f,this.colors={accent:"#2bb",fill:"#eee",light:"#fff",dark:"#333",mediumLight:"#ccc",mediumDark:"#666"},this.transform=s,this.add=s.add,this.Add={};for(var _ in u)this.Add[_]=s.add.bind(this,_);var E=document.createElement("style");E.type="text/css",E.innerHTML="[nexus-ui]{height:5000px;width:5000px}";var C=document.head;C.insertBefore(E,C.firstElementChild)}return x(O,{context:{get:function(){return this._context},set:function(M){this.clock.stop(),this._context=M,this.clock=new h(this.context),this.clock.start()}}}),O}(),y=new g;function A(){return y.colors}function I(){return y.context}function T(){return y.clock}w.default=y},function(v,w,o){v.exports={Position:o(3),Slider:o(14),Toggle:o(15),Button:o(16),TextButton:o(18),RadioButton:o(19),Number:o(20),Select:o(21),Dial:o(22),Piano:o(23),Sequencer:o(24),Pan2D:o(30),Tilt:o(31),Multislider:o(32),Pan:o(33),Envelope:o(34),Spectrogram:o(35),Meter:o(36),Oscilloscope:o(37)}},function(v,w,o){var d=function(n){return n&&n.__esModule?n:{default:n}},m=function(){function n(t,e){for(var r in e){var h=e[r];h.configurable=!0,h.value&&(h.writable=!0)}Object.defineProperties(t,e)}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),x=function n(t,e,r){var h=Object.getOwnPropertyDescriptor(t,e);if(h===void 0){var f=Object.getPrototypeOf(t);return f===null?void 0:n(f,e,r)}else{if("value"in h&&h.writable)return h.value;var g=h.get;return g===void 0?void 0:g.call(r)}},b=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.__proto__=t)},u=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},c=o(4),l=o(6),a=o(11),s=d(o(12)),i=function(n){function t(){u(this,t);var e=["value"],r={size:[200,200],mode:"absolute",minX:0,maxX:1,stepX:0,x:.5,minY:0,maxY:1,stepY:0,y:.5};x(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,arguments,e,r),this._x=new a(this.settings.minX,this.settings.maxX,this.settings.stepX,this.settings.x),this._y=new a(this.settings.minY,this.settings.maxY,this.settings.stepY,this.settings.y),this.position={x:new s.Handle(this.settings.mode,"horizontal",[0,this.width],[this.height,0]),y:new s.Handle(this.settings.mode,"vertical",[0,this.width],[this.height,0])},this.position.x.value=this._x.normalized,this.position.y.value=this._y.normalized,this.init(),this.render()}return b(t,n),m(t,{buildInterface:{value:function(){this.knob=c.create("circle"),this.element.appendChild(this.knob)}},sizeInterface:{value:function(){this.position.x.resize([0,this.width],[this.height,0]),this.position.y.resize([0,this.width],[this.height,0]),this._minDimension=Math.min(this.width,this.height),this.knobRadius={off:~~(this._minDimension/100)*5+5},this.knobRadius.on=this.knobRadius.off*2,this.knob.setAttribute("cx",this.width/2),this.knob.setAttribute("cy",this.height/2),this.knob.setAttribute("r",this.knobRadius.off)}},colorInterface:{value:function(){this.element.style.backgroundColor=this.colors.fill,this.knob.setAttribute("fill",this.colors.accent)}},render:{value:function(){this.clicked?this.knob.setAttribute("r",this.knobRadius.on):this.knob.setAttribute("r",this.knobRadius.off),this.knobCoordinates={x:this._x.normalized*this.width,y:this.height-this._y.normalized*this.height},this.knob.setAttribute("cx",this.knobCoordinates.x),this.knob.setAttribute("cy",this.knobCoordinates.y)}},click:{value:function(){this.position.x.anchor=this.mouse,this.position.y.anchor=this.mouse,this.move()}},move:{value:function(){this.clicked&&(this.position.x.update(this.mouse),this.position.y.update(this.mouse),this._x.updateNormal(this.position.x.value),this._y.updateNormal(this.position.y.value),this.emit("change",{x:this._x.value,y:this._y.value}),this.render())}},release:{value:function(){this.render()}},x:{get:function(){return this._x.value},set:function(e){this._x.update(e),this.emit("change",{x:this._x.value,y:this._y.value}),this.render()}},y:{get:function(){return this._y.value},set:function(e){this._y.update(e),this.emit("change",{x:this._x.value,y:this._y.value}),this.render()}},normalized:{get:function(){return{x:this._x.normalized,y:this._y.normalized}}},minX:{get:function(){return this._x.min},set:function(e){this._x.min=e,this.render()}},minY:{get:function(){return this._y.min},set:function(e){this._y.min=e,this.render()}},maxX:{get:function(){return this._x.max},set:function(e){this._x.max=e,this.render()}},maxY:{get:function(){return this._y.max},set:function(e){this._y.max=e,this.render()}},stepX:{get:function(){return this._x.step},set:function(e){this._x.step=e,this.render()}},stepY:{get:function(){return this._y.step},set:function(e){this._y.step=e,this.render()}},mode:{get:function(){return this.position.x.mode},set:function(e){this.position.x.mode=e,this.position.y.mode=e}}}),t}(l);v.exports=i},function(v,w,o){var d=o(5);v.exports={create:function(m){return document.createElementNS("http://www.w3.org/2000/svg",m)},arc:function(m,x,b,u,c){var l=d.toCartesian(b,c),a=d.toCartesian(b,u),s=c-u<=180?"0":"1",i=["M",l.x+m,l.y+x,"A",b,b,0,s,0,a.x+m,a.y+x].join(" ");return i},radialGradient:function(m,x){var b="gradient"+d.ri(1e11),u=[],c=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");c.setAttribute("id",b),c.setAttribute("cx","50%"),c.setAttribute("cy","50%"),c.setAttribute("r","50%"),m.appendChild(c);for(var l=0;l<x;l++){var a=document.createElementNS("http://www.w3.org/2000/svg","stop");a.setAttribute("id","stop"+l),c.appendChild(a),u.push(a)}return{id:b,stops:u,element:c}}}},function(v,w){w.clip=function(o,d,m){return Math.min(Math.max(o,d),m)},w.normalize=function(o,d,m){return(o-d)/(m-d)},w.scale=function(o,d,m,x,b){return d===m?x:(o-d)*(b-x)/(m-d)+x},w.toPolar=function(o,d){var m=Math.sqrt(o*o+d*d),x=Math.atan2(d,o);return x<0&&(x=x+2*Math.PI),{radius:m,angle:x}},w.toCartesian=function(o,d){var m=Math.cos(d),x=Math.sin(d);return{x:o*m,y:o*x*-1}},w.prune=function(o,d){return parseFloat(o.toFixed(d))},w.invert=function(o){return w.scale(o,1,0,0,1)},w.mtof=function(o){return Math.pow(2,(o-69)/12)*440},w.interp=function(o,d,m){return o*(m-d)+d},w.pick=function(){return arguments[~~(Math.random()*arguments.length)]},w.octave=function(o){return Math.pow(2,o)},w.ri=function(o,d){d||(d=o,o=0);var m=Math.min(o,d),x=Math.max(o,d);return Math.floor(Math.random()*(x-m)+m)},w.rf=function(o,d){d||(d=o,o=0);var m=Math.min(o,d),x=Math.max(o,d);return Math.random()*(x-m)+m},w.cycle=function(o,d,m){return o++,o>=m&&(o=d),o},w.average=function(o){for(var d=0,m=0;m<o.length;m++)d+=o[m];return d/o.length},w.distance=function(o,d,m,x){var b=o-m,u=d-x;return Math.sqrt(b*b+u*u)},w.gainToDB=function(o){return 20*Math.log10(o)},w.coin=function(){var o=arguments[0]===void 0?.5:arguments[0];return w.rf(0,1)<o?1:0}},function(v,w,o){var d=function(){function t(e,r){for(var h in r){var f=r[h];f.configurable=!0,f.value&&(f.writable=!0)}Object.defineProperties(e,r)}return function(e,r,h){return r&&t(e.prototype,r),h&&t(e,h),e}}(),m=function t(e,r,h){var f=Object.getOwnPropertyDescriptor(e,r);if(f===void 0){var g=Object.getPrototypeOf(e);return g===null?void 0:t(g,r,h)}else{if("value"in f&&f.writable)return f.value;var y=f.get;return y===void 0?void 0:y.call(h)}},x=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},b=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=o(4),c=o(7),l=o(8),a=o(9),s=o(10),i=o(1).colors,n=function(t){function e(r,h,f){b(this,e),m(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.type=this.constructor.name,this.settings=this.parseSettings(r,h,f),this.mouse={},this.wait=!1,this.colors={};var g=i();this.colors.accent=g.accent,this.colors.fill=g.fill,this.colors.light=g.light,this.colors.dark=g.dark,this.colors.mediumLight=g.mediumLight,this.colors.mediumDark=g.mediumDark}return x(e,t),d(e,{parseSettings:{value:function(h,f,g){f.unshift("target"),g.defaultSize=g.size.splice(0,2),g.size=!1;var y={target:document.body,colors:{},snapWithParent:!0,event:function(){},component:!1};for(var A in g)y[A]=g[A];for(var I=0;I<h.length;I++){var T=h[I];if(l.isObject(T))for(var A in T)y[A]=T[A];else if(typeof T=="function")y.event=T;else if(f.length>=1){var A=f.splice(0,1)[0];y[A]=T}}return this.parent=c.parseElement(y.target),this.parent&&this.parent instanceof HTMLElement&&!y.component&&(this.parent.hasAttribute("nexus-ui")||this.parent.setAttribute("nexus-ui","")),y.size&&Array.isArray(y.size)&&y.snapWithParent?(this.width=y.size[0],this.height=y.size[1],this.parent.style.width=this.width+"px",this.parent.style.height=this.height+"px"):y.snapWithParent&&!y.component?(this.width=parseFloat(window.getComputedStyle(this.parent,null).getPropertyValue("width").replace("px","")),this.height=parseFloat(window.getComputedStyle(this.parent,null).getPropertyValue("height").replace("px","")),this.width==5e3&&(this.width=y.defaultSize[0],this.parent.style.width=this.parent.width=this.width+"px"),this.height==5e3&&(this.height=y.defaultSize[1],this.parent.style.height=this.parent.height=this.height+"px")):(y.size=y.defaultSize,this.width=y.size[0],this.height=y.size[1]),y.event?this.event=this.on("change",y.event):this.event=!1,y}},init:{value:function(){this.buildFrame(),this.buildInterface(),this.sizeInterface(),this.attachListeners(),this.colorInterface(),this.finalTouches()}},buildFrame:{value:function(){this.element=u.create("svg"),this.element.setAttribute("width",this.width),this.element.setAttribute("height",this.height),this.parent.appendChild(this.element)}},buildInterface:{value:function(){}},sizeInterface:{value:function(){}},colorInterface:{value:function(){}},attachListeners:{value:function(){var h=this;this.interactionTarget=this.interactionTarget||this.element,a.exists&&(this.interactionTarget.addEventListener("touchstart",function(f){return h.preTouch(f)}),this.interactionTarget.addEventListener("touchmove",function(f){return h.preTouchMove(f)}),this.interactionTarget.addEventListener("touchend",function(f){return h.preTouchRelease(f)})),this.boundPreMove=function(f){return h.preMove(f)},this.boundPreRelease=function(f){return h.preRelease(f)},this.interactionTarget.addEventListener("mousedown",function(f){return h.preClick(f)})}},finalTouches:{value:function(){this.element.style.cursor="pointer"}},preClick:{value:function(h){this.element instanceof HTMLElement&&(this.width=window.getComputedStyle(this.element,null).getPropertyValue("width").replace("px","")),this.offset=c.findPosition(this.element),this.mouse=c.locateMouse(h,this.offset),this.clicked=!0,this.click(),this.moveEvent=document.addEventListener("mousemove",this.boundPreMove),this.releaseEvent=document.addEventListener("mouseup",this.boundPreRelease),this.emit("click"),h.preventDefault(),h.stopPropagation()}},preMove:{value:function(h){var f=this;this.wait||(this.mouse=c.locateMouse(h,this.offset),this.move(),this.wait=!0,setTimeout(function(){f.wait=!1},25)),h.preventDefault(),h.stopPropagation()}},preRelease:{value:function(h){this.mouse=c.locateMouse(h,this.offset),this.clicked=!1,this.release(),this.emit("release"),document.removeEventListener("mousemove",this.boundPreMove),document.removeEventListener("mouseup",this.boundPreRelease),h.preventDefault(),h.stopPropagation()}},click:{value:function(){}},move:{value:function(){}},release:{value:function(){}},preTouch:{value:function(h){this.element instanceof HTMLElement&&(this.width=window.getComputedStyle(this.element,null).getPropertyValue("width").replace("px","")),this.offset=c.findPosition(this.element),this.mouse=c.locateTouch(h,this.offset),this.clicked=!0,this.touch(h),this.emit("click"),h.preventDefault(),h.stopPropagation()}},preTouchMove:{value:function(h){this.clicked&&(this.mouse=c.locateTouch(h,this.offset),this.touchMove(),h.preventDefault(),h.stopPropagation())}},preTouchRelease:{value:function(h){this.mouse=c.locateTouch(h,this.offset),this.clicked=!1,this.touchRelease(),this.emit("release"),h.preventDefault(),h.stopPropagation()}},touch:{value:function(){this.click()}},touchMove:{value:function(){this.move()}},touchRelease:{value:function(){this.release()}},resize:{value:function(h,f){this.width=h,this.height=f,this.parent.style.width=this.width+"px",this.parent.style.height=this.height+"px",this.element.setAttribute("width",this.width),this.element.setAttribute("height",this.height),this.sizeInterface()}},empty:{value:function(){for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild)}},destroy:{value:function(){this.empty(),this.parent.removeChild(this.element),this.removeAllListeners(),this.instrument&&delete this.instrument[this.id],this.customDestroy()}},customDestroy:{value:function(){}},colorize:{value:function(h,f){this.colors[h]=f,this.colorInterface()}}}),e}(s);v.exports=n},function(v,w){w.findPosition=function(o){var d=o.getBoundingClientRect(),m=d.top+window.scrollY,x=d.left+window.scrollX;return{top:m,left:x}},w.parseElement=function(o){return typeof o=="string"&&(o=document.getElementById(o.replace("#",""))),o instanceof HTMLElement||o instanceof SVGElement?o:"No valid parent argument"},w.locateMouse=function(o,d){return{x:o.pageX-d.left,y:o.pageY-d.top}},w.locateTouch=function(o,d){return{x:o.targetTouches.length?o.targetTouches[0].pageX-d.left:!1,y:o.targetTouches.length?o.targetTouches[0].pageY-d.top:!1}},w.SmartCanvas=function(o){var d=this;this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),o.appendChild(this.element),this.resize=function(m,x){d.element.width=m*2,d.element.height=x*2,d.element.style.width=m+"px",d.element.style.height=x+"px"}}},function(v,w){w.isObject=function(o){return typeof o=="object"&&!Array.isArray(o)&&o!==null&&!(o instanceof SVGElement)&&!(o instanceof HTMLElement)},w.setInputFilter=function(o,d){["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach(function(m){o.addEventListener(m,function(){d(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})})}},function(v,w){w.exists="ontouchstart"in document.documentElement},function(v,w){function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}v.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(u){if(!m(u)||u<0||isNaN(u))throw TypeError("n must be a positive number");return this._maxListeners=u,this},o.prototype.emit=function(u){var c,l,a,s,i,n;if(this._events||(this._events={}),u==="error"&&(!this._events.error||x(this._events.error)&&!this._events.error.length)){if(c=arguments[1],c instanceof Error)throw c;var t=new Error('Uncaught, unspecified "error" event. ('+c+")");throw t.context=c,t}if(l=this._events[u],b(l))return!1;if(d(l))switch(arguments.length){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),l.apply(this,s)}else if(x(l))for(s=Array.prototype.slice.call(arguments,1),n=l.slice(),a=n.length,i=0;i<a;i++)n[i].apply(this,s);return!0},o.prototype.addListener=function(u,c){var l;if(!d(c))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",u,d(c.listener)?c.listener:c),this._events[u]?x(this._events[u])?this._events[u].push(c):this._events[u]=[this._events[u],c]:this._events[u]=c,x(this._events[u])&&!this._events[u].warned&&(b(this._maxListeners)?l=o.defaultMaxListeners:l=this._maxListeners,l&&l>0&&this._events[u].length>l&&(this._events[u].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[u].length),typeof console.trace=="function"&&console.trace())),this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(u,c){if(!d(c))throw TypeError("listener must be a function");var l=!1;function a(){this.removeListener(u,a),l||(l=!0,c.apply(this,arguments))}return a.listener=c,this.on(u,a),this},o.prototype.removeListener=function(u,c){var l,a,s,i;if(!d(c))throw TypeError("listener must be a function");if(!this._events||!this._events[u])return this;if(l=this._events[u],s=l.length,a=-1,l===c||d(l.listener)&&l.listener===c)delete this._events[u],this._events.removeListener&&this.emit("removeListener",u,c);else if(x(l)){for(i=s;i-- >0;)if(l[i]===c||l[i].listener&&l[i].listener===c){a=i;break}if(a<0)return this;l.length===1?(l.length=0,delete this._events[u]):l.splice(a,1),this._events.removeListener&&this.emit("removeListener",u,c)}return this},o.prototype.removeAllListeners=function(u){var c,l;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[u]&&delete this._events[u],this;if(arguments.length===0){for(c in this._events)c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events={},this}if(l=this._events[u],d(l))this.removeListener(u,l);else if(l)for(;l.length;)this.removeListener(u,l[l.length-1]);return delete this._events[u],this},o.prototype.listeners=function(u){var c;return!this._events||!this._events[u]?c=[]:d(this._events[u])?c=[this._events[u]]:c=this._events[u].slice(),c},o.prototype.listenerCount=function(u){if(this._events){var c=this._events[u];if(d(c))return 1;if(c)return c.length}return 0},o.listenerCount=function(u,c){return u.listenerCount(c)};function d(u){return typeof u=="function"}function m(u){return typeof u=="number"}function x(u){return typeof u=="object"&&u!==null}function b(u){return u===void 0}},function(v,w,o){var d=function(){function u(c,l){for(var a in l){var s=l[a];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(c,l)}return function(c,l,a){return l&&u(c.prototype,l),a&&u(c,a),c}}(),m=function(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")},x=o(5),b=function(){function u(){var c=arguments[0]===void 0?0:arguments[0],l=arguments[1]===void 0?1:arguments[1],a=arguments[2]===void 0?0:arguments[2],s=arguments[3]===void 0?0:arguments[3];m(this,u),this.min=c,this.max=l,this.step=a,this.value=s,this.changed=!1,this.oldValue=!1,this.update(this.value)}return d(u,{update:{value:function(l){return this.step?this.value=x.clip(Math.round((l-this.min)/this.step)*this.step+this.min,this.min,this.max):this.value=x.clip(l,this.min,this.max),this.oldValue!==this.value?(this.oldValue=this.value,this.changed=!0):this.changed=!1,this.value}},updateNormal:{value:function(l){return this.value=x.scale(l,0,1,this.min,this.max),this.update(this.value)}},normalized:{get:function(){return x.normalize(this.value,this.min,this.max)}}}),u}();v.exports=b},function(v,w,o){var d=function(c){return c&&c.__esModule?c.default:c},m=function(){function c(l,a){for(var s in a){var i=a[s];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(l,a)}return function(l,a,s){return a&&c(l.prototype,a),s&&c(l,s),l}}(),x=function(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(w,"__esModule",{value:!0});var b=d(o(5)),u=d(o(13));w.Handle=function(){function c(){var l=arguments[0]===void 0?"absolute":arguments[0],a=arguments[1]===void 0?"vertical":arguments[1],s=arguments[2]===void 0?[0,100]:arguments[2],i=arguments[3]===void 0?[0,100]:arguments[3];x(this,c),this.mode=l,this.direction=a,this.previous=0,this.value=0,this.sensitivity=1,this.resize(s,i)}return m(c,{resize:{value:function(a,s){this.boundary={min:{x:a[0],y:s[0]},max:{x:a[1],y:s[1]},center:{x:(a[1]-a[0])/2+a[0],y:(s[1]-s[0])/2+s[0]}}}},anchor:{set:function(l){this._anchor=this.convertPositionToValue(l)},get:function(){return this._anchor}},update:{value:function(a){if(this.mode==="relative"){var s=this.convertPositionToValue(a)-this.anchor;Math.abs(s)>.5&&(s=0),this.anchor=a,this.value=this.value+s*this.sensitivity}else this.value=this.convertPositionToValue(a);this.value=b.clip(this.value,0,1)}},convertPositionToValue:{value:function(a){switch(this.direction){case"radial":var s=b.toPolar(a.x-this.boundary.center.x,a.y-this.boundary.center.y);return s=s.angle/(Math.PI*2),s=(s-.25+1)%1,s;case"vertical":return b.scale(a.y,this.boundary.min.y,this.boundary.max.y,0,1);case"horizontal":return b.scale(a.x,this.boundary.min.x,this.boundary.max.x,0,1)}}}}),c}(),w.Button=function(){function c(){var l=arguments[0]===void 0?"button":arguments[0];x(this,c),this.mode=l,this.state=new u,this.paintbrush=!1}return m(c,{click:{value:function(){switch(this.mode){case"impulse":this.state.on(),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.state.off.bind(this),30),this.emit("change",this.state);break;case"button":this.turnOn(),this.emit("change",this.state);break;case"aftertouch":this.position={x:b.clip(this.mouse.x/this.width,0,1),y:b.clip(1-this.mouse.y/this.height,0,1)},this.turnOn(),this.emit("change",{state:this.state,x:this.position.x,y:this.position.y});break;case"toggle":this.flip(),this.emit("change",this.state);break}}},move:{value:function(){this.mode==="aftertouch"&&(this.position={x:b.clip(this.mouse.x/this.width,0,1),y:b.clip(1-this.mouse.y/this.height,0,1)},this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}),this.render())}},release:{value:function(){switch(this.mode){case"button":this.turnOff(),this.emit("change",this.state);break;case"aftertouch":this.turnOff(),this.position={x:this.mouse.x/this.width,y:1-this.mouse.y/this.height},this.emit("change",{state:this.state,x:this.position.x,y:this.position.y});break}}}}),c}()},function(v,w){var o=function(){function x(b,u){for(var c in u){var l=u[c];l.configurable=!0,l.value&&(l.writable=!0)}Object.defineProperties(b,u)}return function(b,u,c){return u&&x(b.prototype,u),c&&x(b,c),b}}(),d=function(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")},m=function(){function x(b){d(this,x),this.state=b||!1}return o(x,{flip:{value:function(u){u||u===!1?this.state=u:this.state=!this.state}},on:{value:function(){this.state=!0}},off:{value:function(){this.state=!1}}}),x}();v.exports=m},function(v,w,o){var d=function(n){return n&&n.__esModule?n:{default:n}},m=function(){function n(t,e){for(var r in e){var h=e[r];h.configurable=!0,h.value&&(h.writable=!0)}Object.defineProperties(t,e)}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),x=function n(t,e,r){var h=Object.getOwnPropertyDescriptor(t,e);if(h===void 0){var f=Object.getPrototypeOf(t);return f===null?void 0:n(f,e,r)}else{if("value"in h&&h.writable)return h.value;var g=h.get;return g===void 0?void 0:g.call(r)}},b=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.__proto__=t)},u=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},c=o(4),l=o(6),a=o(11),s=d(o(12)),i=function(n){function t(){u(this,t);var e=["min","max","value"],r={size:[120,20],mode:"relative",min:0,max:1,step:0,value:0};x(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,arguments,e,r),this.orientation="vertical",this._value=new a(this.settings.min,this.settings.max,this.settings.step,this.settings.value),this.position=new s.Handle(this.settings.mode,this.orientation,[0,this.width],[this.height,0]),this.position.value=this._value.normalized,this.init(),this.position.direction=this.orientation,this.emit("change",this.value)}return b(t,n),m(t,{buildInterface:{value:function(){this.bar=c.create("rect"),this.fillbar=c.create("rect"),this.knob=c.create("circle"),this.element.appendChild(this.bar),this.element.appendChild(this.fillbar),this.element.appendChild(this.knob)}},sizeInterface:{value:function(){this.width<this.height?(this.orientation="vertical",this.position.direction="vertical"):(this.orientation="horizontal",this.position.direction="horizontal"),this.position&&this.position.resize([0,this.width],[this.height,0]);var r=void 0,h=void 0,f=void 0,g=void 0,y=void 0,A=void 0;this.knobData={level:0,r:0},this.orientation==="vertical"?(this.thickness=this.width/2,r=this.width/2,h=0,f=this.thickness,g=this.height,this.knobData.r=this.thickness*.8,this.knobData.level=g-this.knobData.r-this.normalized*(g-this.knobData.r*2),y="translate("+this.thickness*-1/2+",0)",A=f/2):(this.thickness=this.height/2,r=0,h=this.height/2,f=this.width,g=this.thickness,this.knobData.r=this.thickness*.8,this.knobData.level=this.normalized*(f-this.knobData.r*2)+this.knobData.r,y="translate(0,"+this.thickness*-1/2+")",A=g/2),this.bar.setAttribute("x",r),this.bar.setAttribute("y",h),this.bar.setAttribute("transform",y),this.bar.setAttribute("rx",A),this.bar.setAttribute("ry",A),this.bar.setAttribute("width",f),this.bar.setAttribute("height",g),this.orientation==="vertical"?(this.fillbar.setAttribute("x",r),this.fillbar.setAttribute("y",this.knobData.level),this.fillbar.setAttribute("width",f),this.fillbar.setAttribute("height",g-this.knobData.level)):(this.fillbar.setAttribute("x",0),this.fillbar.setAttribute("y",h),this.fillbar.setAttribute("width",this.knobData.level),this.fillbar.setAttribute("height",g)),this.fillbar.setAttribute("transform",y),this.fillbar.setAttribute("rx",A),this.fillbar.setAttribute("ry",A),this.orientation==="vertical"?(this.knob.setAttribute("cx",r),this.knob.setAttribute("cy",this.knobData.level)):(this.knob.setAttribute("cx",this.knobData.level),this.knob.setAttribute("cy",h)),this.knob.setAttribute("r",this.knobData.r)}},colorInterface:{value:function(){this.bar.setAttribute("fill",this.colors.fill),this.fillbar.setAttribute("fill",this.colors.accent),this.knob.setAttribute("fill",this.colors.accent)}},render:{value:function(){this.clicked||(this.knobData.r=this.thickness*.75),this.knob.setAttribute("r",this.knobData.r),this.orientation==="vertical"?(this.knobData.level=this.knobData.r+this._value.normalized*(this.height-this.knobData.r*2),this.knob.setAttribute("cy",this.height-this.knobData.level),this.fillbar.setAttribute("y",this.height-this.knobData.level),this.fillbar.setAttribute("height",this.knobData.level)):(this.knobData.level=this._value.normalized*(this.width-this.knobData.r*2)+this.knobData.r,this.knob.setAttribute("cx",this.knobData.level),this.fillbar.setAttribute("x",0),this.fillbar.setAttribute("width",this.knobData.level))}},click:{value:function(){this.knobData.r=this.thickness*.9,this.position.anchor=this.mouse,this.move()}},move:{value:function(){this.clicked&&(this.position.update(this.mouse),this._value.updateNormal(this.position.value),this.emit("change",this._value.value),this.render())}},release:{value:function(){this.render()}},normalized:{get:function(){return this._value.normalized}},value:{get:function(){return this._value.value},set:function(e){this._value.update(e),this.position.value=this._value.normalized,this.emit("change",this._value.value),this.render()}},min:{get:function(){return this._value.min},set:function(e){this._value.min=e}},max:{get:function(){return this._value.max},set:function(e){this._value.max=e}},step:{get:function(){return this._value.step},set:function(e){this._value.step=e}},mode:{get:function(){return this.position.mode},set:function(e){this.position.mode=e}}}),t}(l);v.exports=i},function(v,w,o){var d=function(){function s(i,n){for(var t in n){var e=n[t];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(i,n)}return function(i,n,t){return n&&s(i.prototype,n),t&&s(i,t),i}}(),m=function s(i,n,t){var e=Object.getOwnPropertyDescriptor(i,n);if(e===void 0){var r=Object.getPrototypeOf(i);return r===null?void 0:s(r,n,t)}else{if("value"in e&&e.writable)return e.value;var h=e.get;return h===void 0?void 0:h.call(t)}},x=function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);s.prototype=Object.create(i&&i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),i&&(s.__proto__=i)},b=function(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")},u=o(4),c=o(13),l=o(6),a=function(s){function i(){b(this,i);var n=["value"],t={size:[40,20],target:!1,state:!1};m(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,arguments,n,t),this._state=new c(this.settings.state),this.init()}return x(i,s),d(i,{buildInterface:{value:function(){this.bar=u.create("rect"),this.knob=u.create("circle"),this.element.appendChild(this.bar),this.element.appendChild(this.knob)}},sizeInterface:{value:function(){this.height<this.width/2?this.knobSize=this.height/2:this.knobSize=this.width/4,this.bar.setAttribute("x",this.width/2-this.knobSize*1.5),this.bar.setAttribute("y",this.height/2-this.knobSize/2),this.bar.setAttribute("rx",this.knobSize/2),this.bar.setAttribute("ry",this.knobSize/2),this.bar.setAttribute("width",this.knobSize*3),this.bar.setAttribute("height",this.knobSize),this.knob.setAttribute("cx",this.width/2-this.knobSize),this.knob.setAttribute("cy",this.height/2),this.knob.setAttribute("r",this.knobSize)}},colorInterface:{value:function(){this.knob.setAttribute("fill",this.colors.accent),this.render()}},render:{value:function(){this.state?(this.knob.setAttribute("cx",this.width/2+this.knobSize),this.bar.setAttribute("fill",this.colors.accent)):(this.knob.setAttribute("cx",this.width/2-this.knobSize),this.bar.setAttribute("fill",this.colors.fill))}},click:{value:function(){this.flip(),this.render(),this.emit("change",this.state)}},state:{get:function(){return this._state.state},set:function(n){this._state.flip(n),this.emit("change",this.state),this.render()}},flip:{value:function(){this._state.flip(),this.render()}}}),i}(l);v.exports=a},function(v,w,o){var d=function(){function a(s,i){for(var n in i){var t=i[n];t.configurable=!0,t.value&&(t.writable=!0)}Object.defineProperties(s,i)}return function(s,i,n){return i&&a(s.prototype,i),n&&a(s,n),s}}(),m=function a(s,i,n){var t=Object.getOwnPropertyDescriptor(s,i);if(t===void 0){var e=Object.getPrototypeOf(s);return e===null?void 0:a(e,i,n)}else{if("value"in t&&t.writable)return t.value;var r=t.get;return r===void 0?void 0:r.call(n)}},x=function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),s&&(a.__proto__=s)},b=function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")},u=o(4),c=o(17),l=function(a){function s(){b(this,s);var i=["mode"],n={size:[80,80],mode:"aftertouch",state:!1};m(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,arguments,i,n),this.mode=this.settings.mode,this.init(),this.render()}return x(s,a),d(s,{buildInterface:{value:function(){this.pad=u.create("circle"),this.element.appendChild(this.pad),this.interactionTarget=this.pad,this.defs=u.create("defs"),this.element.appendChild(this.defs),this.gradient=u.radialGradient(this.defs,2),this.gradient.stops[0].setAttribute("offset","30%"),this.gradient.stops[1].setAttribute("offset","100%")}},sizeInterface:{value:function(){this.pad.setAttribute("cx",this.width/2),this.pad.setAttribute("cy",this.height/2),this.pad.setAttribute("r",Math.min(this.width,this.height)/2-this.width/40),this.pad.setAttribute("stroke-width",this.width/20)}},colorInterface:{value:function(){this.gradient.stops[0].setAttribute("stop-color",this.colors.accent),this.gradient.stops[1].setAttribute("stop-color",this.colors.fill),this.render()}},render:{value:function(){this.state?(this.mode==="aftertouch"?(this.pad.setAttribute("stroke","url(#"+this.gradient.id+")"),this.gradient.element.setAttribute("cx",this.position.x*100+"%"),this.gradient.element.setAttribute("cy",(1-this.position.y)*100+"%")):this.pad.setAttribute("stroke",this.colors.accent),this.pad.setAttribute("fill",this.colors.accent)):(this.pad.setAttribute("fill",this.colors.fill),this.pad.setAttribute("stroke",this.colors.mediumLight))}}}),s}(c);v.exports=l},function(v,w,o){var d=function(){function i(n,t){for(var e in t){var r=t[e];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(n,t)}return function(n,t,e){return t&&i(n.prototype,t),e&&i(n,e),n}}(),m=function i(n,t,e){var r=Object.getOwnPropertyDescriptor(n,t);if(r===void 0){var h=Object.getPrototypeOf(n);return h===null?void 0:i(h,t,e)}else{if("value"in r&&r.writable)return r.value;var f=r.get;return f===void 0?void 0:f.call(e)}},x=function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n&&(i.__proto__=n)},b=function(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")},u=o(4),c=o(5),l=o(13),a=o(6),s=function(i){function n(t,e,r){b(this,n),m(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,t,e,r),this.mode=this.settings.mode||"button",this.position={x:0,y:0},this._state=new l(this.settings.state)}return x(n,i),d(n,{buildInterface:{value:function(){this.pad=u.create("circle"),this.pad.setAttribute("fill","#d18"),this.pad.setAttribute("stroke","#d18"),this.pad.setAttribute("stroke-width",4),this.element.appendChild(this.pad),this.interactionTarget=this.pad,this.sizeInterface()}},sizeInterface:{value:function(){this.pad.setAttribute("cx",this.width/2),this.pad.setAttribute("cy",this.height/2),this.pad.setAttribute("r",Math.min(this.width,this.height)/2-2)}},render:{value:function(){this.state?(this.pad.setAttribute("fill",this.colors.accent),this.pad.setAttribute("stroke",this.colors.accent)):(this.pad.setAttribute("fill",this.colors.fill),this.pad.setAttribute("stroke",this.colors.mediumLight))}},down:{value:function(e){switch(this.mode){case"impulse":this.turnOn(),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.turnOff.bind(this),30);break;case"button":this.turnOn();break;case"aftertouch":this.position={x:c.clip(this.mouse.x/this.width,0,1),y:c.clip(1-this.mouse.y/this.height,0,1)},this.turnOn();break;case"toggle":this.flip(e);break}}},bend:{value:function(e){this.mode==="aftertouch"&&(this.mouse=e||this.mouse,this.position={x:c.clip(this.mouse.x/this.width,0,1),y:c.clip(1-this.mouse.y/this.height,0,1)},this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}),this.render())}},up:{value:function(){switch(this.mode){case"button":this.turnOff();break;case"aftertouch":this.turnOff(),this.position={x:c.clip(this.mouse.x/this.width,0,1),y:c.clip(1-this.mouse.y/this.height,0,1)};break}}},click:{value:function(){this.down()}},move:{value:function(){this.bend()}},release:{value:function(){this.up()}},state:{get:function(){return this._state.state},set:function(t){this._state.flip(t),this.mode==="aftertouch"?this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}):this.emit("change",this.state),this.render()}},flip:{value:function(e){this._state.flip(e),this.mode==="aftertouch"?this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}):this.emit("change",this.state),this.render()}},turnOn:{value:function(e){this._state.on(),e!==!1&&(this.mode==="aftertouch"?this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}):this.emit("change",this.state)),this.render()}},turnOff:{value:function(e){this._state.off(),e!==!1&&(this.mode==="aftertouch"?this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}):this.emit("change",this.state)),this.render()}}}),n}(a);v.exports=s},function(v,w,o){var d=function(){function l(a,s){for(var i in s){var n=s[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(a,s)}return function(a,s,i){return s&&l(a.prototype,s),i&&l(a,i),a}}(),m=function l(a,s,i){var n=Object.getOwnPropertyDescriptor(a,s);if(n===void 0){var t=Object.getPrototypeOf(a);return t===null?void 0:l(t,s,i)}else{if("value"in n&&n.writable)return n.value;var e=n.get;return e===void 0?void 0:e.call(i)}},x=function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(l.__proto__=a)},b=function(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")},u=o(17),c=function(l){function a(){b(this,a);var s=["value"],i={size:[150,50],state:!1,text:"Play"};m(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,arguments,s,i),this._text=this.settings.text,this.settings.alternate&&(this.settings.alternateText=this.settings.alternate,console.warn("'alternate' initiator is deprecated. Use 'alternateText' instead.")),this._alternateText=this.settings.alternateText,this.mode=this.settings.alternateText?"toggle":"button",this.init(),this.render(),this.state=this.settings.state}return x(a,l),d(a,{buildFrame:{value:function(){this.element=document.createElement("div"),this.parent.appendChild(this.element),this.textElement=document.createElement("div"),this.textElement.innerHTML=this._text,this.element.appendChild(this.textElement)}},buildInterface:{value:function(){}},colorInterface:{value:function(){this.element.style.color=this.colors.dark,this.render()}},sizeInterface:{value:function(){var i=this.height/3,n=this.width/(this._text.length+2);if(i=Math.min(i,n),this.alternateText){var t=this.width/(this.alternateText.length+2);i=Math.min(i,t)}var e="width: "+this.width+"px;";e+="height: "+this.height+"px;",e+="padding: "+(this.height-i)/2+"px 0px;",e+="box-sizing: border-box;",e+="text-align: center;",e+="font-family: inherit;",e+="font-weight: 700;",e+="opacity: 1;",e+="font-size:"+i+"px;",this.textElement.style.cssText=e,this.render()}},render:{value:function(){this.state?(this.element.style.backgroundColor=this.colors.accent,this.textElement.style.color=this.colors.fill,this.alternateText?this.textElement.innerHTML=this._alternateText:this.textElement.innerHTML=this._text):(this.element.style.backgroundColor=this.colors.fill,this.textElement.style.color=this.colors.dark,this.textElement.innerHTML=this._text)}},alternateText:{get:function(){return this._alternateText},set:function(s){s?this.mode="toggle":this.mode="button",this._alternateText=s,this.render()}},text:{get:function(){return this._text},set:function(s){this._text=s,this.sizeInterface(),this.render()}}}),a}(u);v.exports=c},function(v,w,o){var d=function(){function a(s,i){for(var n in i){var t=i[n];t.configurable=!0,t.value&&(t.writable=!0)}Object.defineProperties(s,i)}return function(s,i,n){return i&&a(s.prototype,i),n&&a(s,n),s}}(),m=function a(s,i,n){var t=Object.getOwnPropertyDescriptor(s,i);if(t===void 0){var e=Object.getPrototypeOf(s);return e===null?void 0:a(e,i,n)}else{if("value"in t&&t.writable)return t.value;var r=t.get;return r===void 0?void 0:r.call(n)}},x=function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),s&&(a.__proto__=s)},b=function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")},u=o(6),c=o(16),l=function(a){function s(){b(this,s);var i=["value"],n={size:[120,25],numberOfButtons:4,active:-1};m(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,arguments,i,n),this.buttons=[],this._numberOfButtons=this.settings.numberOfButtons,this.active=this.settings.active,this.init(),this.render()}return x(s,a),d(s,{buildFrame:{value:function(){this.element=document.createElement("div"),this.parent.appendChild(this.element)}},buildInterface:{value:function(){for(var n=0;n<this._numberOfButtons;n++){var t=document.createElement("span"),e=new c(t,{mode:"toggle",component:!0},this.update.bind(this,n));this.buttons.push(e),this.element.appendChild(t)}}},sizeInterface:{value:function(){var n=void 0;this.width>this.height?n="horizontal":n="vertical";for(var t=this.width/(n==="vertical"?1:this._numberOfButtons),e=this.height/(n==="vertical"?this._numberOfButtons:1),r=0;r<this._numberOfButtons;r++)this.buttons[r].resize(t,e)}},colorInterface:{value:function(){for(var n=0;n<this._numberOfButtons;n++)this.buttons[n].colors=this.colors,this.buttons[n].render()}},update:{value:function(n){this.buttons[n].state?this.select(n):this.deselect()}},render:{value:function(){for(var n=0;n<this.buttons.length;n++)n===this.active?this.buttons[n].turnOn(!1):this.buttons[n].turnOff(!1)}},select:{value:function(n){n>=0&&n<this.buttons.length&&(this.active=n,this.emit("change",this.active),this.render())}},deselect:{value:function(){this.active=-1,this.emit("change",this.active),this.render()}},numberOfButtons:{get:function(){return this._numberOfButtons},set:function(i){this._numberOfButtons=i;for(var n=0;n<this.buttons.length;n++)this.buttons[n].destroy();this.buttons=[],this.empty(),this.buildInterface()}}}),s}(u);v.exports=l},function(v,w,o){var d=function(){function i(n,t){for(var e in t){var r=t[e];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(n,t)}return function(n,t,e){return t&&i(n.prototype,t),e&&i(n,e),n}}(),m=function i(n,t,e){var r=Object.getOwnPropertyDescriptor(n,t);if(r===void 0){var h=Object.getPrototypeOf(n);return h===null?void 0:i(h,t,e)}else{if("value"in r&&r.writable)return r.value;var f=r.get;return f===void 0?void 0:f.call(e)}},x=function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n&&(i.__proto__=n)},b=function(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")},u=o(6),c=o(11),l=o(5),a=o(8),s=function(i){function n(){b(this,n);var t=["value"],e={size:[60,30],value:0,min:0,max:2e4,step:1};m(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,arguments,t,e),this._value=new c(this.settings.min,this.settings.max,this.settings.step,this.settings.value),this.decimalPlaces=2,this.actual=0,this.max=this._value.max,this.min=this._value.min,this.step=this._value.step,this.init(),this.render()}return x(n,i),d(n,{buildFrame:{value:function(){this.element=document.createElement("input"),this.element.type="text",this.element.addEventListener("blur",function(){this.element.style.backgroundColor=this.colors.fill,this.element.style.color=this.colors.dark,this.element.value!==this.value&&(this.value=parseFloat(this.element.value),this.render())}.bind(this)),a.setInputFilter(this.element,function(e){return/^-?\d*\.?\d*$/.test(e)}),this.element.addEventListener("keydown",function(e){e.which===13&&(this.element.blur(),this.value=this.element.value,this.emit("change",this.value),this.render())}.bind(this),!0),this.parent.appendChild(this.element)}},sizeInterface:{value:function(){this._minDimension=Math.min(this.width,this.height);var e="width: "+this.width+"px;";e+="height: "+this.height+"px;",e+="background-color: #e7e7e7;",e+="color: #333;",e+="font-family: arial;",e+="font-weight: 500;",e+="font-size:"+this._minDimension/2+"px;",e+="border: none;",e+="outline: none;",e+="padding: "+this._minDimension/4+"px "+this._minDimension/4+"px;",e+="box-sizing: border-box;",e+="userSelect: text;",e+="mozUserSelect: text;",e+="webkitUserSelect: text;",this.element.style.cssText+=e,this.element.value=this.value}},colorInterface:{value:function(){this.element.style.backgroundColor=this.colors.fill,this.element.style.color=this.colors.dark}},render:{value:function(){this.element.value=l.prune(this.value,this.decimalPlaces)}},click:{value:function(){this.hasMoved=!1,this.element.readOnly=!0,this.actual=this.value,this.initial={y:this.mouse.y},this.changeFactor=l.invert(this.mouse.x/this.width)}},move:{value:function(){if(this.hasMoved=!0,this.clicked){var e=this.actual-(this.mouse.y-this.initial.y)*(l.clip(this.max-this.min,0,1e3)/200)*Math.pow(this.changeFactor,2);this.value=e,this.render(),this._value.changed&&this.emit("change",this.value)}}},release:{value:function(){this.hasMoved?document.body.focus():(this.element.readOnly=!1,this.element.focus(),this.element.setSelectionRange(0,this.element.value.length),this.element.style.backgroundColor=this.colors.accent,this.element.style.color=this.colors.light)}},link:{value:function(e){var r=this;this.min=e.min,this.max=e.max,this.step=e.step,e.on("change",function(h){r.passiveUpdate(h)}),this.on("change",function(h){e.value=h}),this.value=e.value}},passiveUpdate:{value:function(e){this._value.update(e),this.render()}},value:{get:function(){return this._value.value},set:function(t){this._value.update(t),this.emit("change",this.value),this.render()}},min:{get:function(){return this._value.min},set:function(t){this._value.min=t}},max:{get:function(){return this._value.max},set:function(t){this._value.max=t}},step:{get:function(){return this._value.step},set:function(t){this._value.step=t}}}),n}(u);v.exports=s},function(v,w,o){var d=function(){function l(a,s){for(var i in s){var n=s[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(a,s)}return function(a,s,i){return s&&l(a.prototype,s),i&&l(a,i),a}}(),m=function l(a,s,i){var n=Object.getOwnPropertyDescriptor(a,s);if(n===void 0){var t=Object.getPrototypeOf(a);return t===null?void 0:l(t,s,i)}else{if("value"in n&&n.writable)return n.value;var e=n.get;return e===void 0?void 0:e.call(i)}},x=function(l,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);l.prototype=Object.create(a&&a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),a&&(l.__proto__=a)},b=function(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")},u=o(6),c=function(l){function a(){b(this,a);var s=["value"],i={size:[100,30],options:["default","options"]};m(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,arguments,s,i),this._selectedIndex=-1,this._value=!1,this._options=this.settings.options,this.init(),this.render()}return x(a,l),d(a,{buildFrame:{value:function(){this.element=document.createElement("select"),this.element.style.fontSize=this.height/2+"px",this.element.style.outline="none",this.element.style.highlight="none",this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.boundRender=this.render.bind(this),this.element.addEventListener("change",this.boundRender),this.parent.appendChild(this.element)}},attachListeners:{value:function(){}},buildInterface:{value:function(){this.defineOptions()}},colorInterface:{value:function(){this.element.style.backgroundColor=this.colors.fill,this.element.style.color=this.colors.dark,this.element.style.border="solid 0px "+this.colors.mediumLight}},render:{value:function(){this._value=this.element.options[this.element.selectedIndex].text,this._selectedIndex=this.element.selectedIndex,this.emit("change",{value:this._value,index:this._selectedIndex})}},click:{value:function(){}},move:{value:function(){}},release:{value:function(){}},defineOptions:{value:function(i){i&&(this._options=i);for(var n=this.element.options.length-1;n>=0;n--)this.element.remove(n);for(var n=0;n<this._options.length;n++)this.element.options.add(new Option(this._options[n],n))}},value:{get:function(){return this._value},set:function(s){this._value=s;for(var i=0;i<this.element.options.length;i++)if(s===this.element.options[i].text){this.selectedIndex=i;break}}},selectedIndex:{get:function(){return this._selectedIndex},set:function(s){this._selectedIndex=s,this.element.selectedIndex=s,this.render()}},customDestroy:{value:function(){this.element.removeEventListener("change",this.boundRender)}}}),a}(u);v.exports=c},function(v,w,o){var d=function(t){return t&&t.__esModule?t:{default:t}},m=function(){function t(e,r){for(var h in r){var f=r[h];f.configurable=!0,f.value&&(f.writable=!0)}Object.defineProperties(e,r)}return function(e,r,h){return r&&t(e.prototype,r),h&&t(e,h),e}}(),x=function t(e,r,h){var f=Object.getOwnPropertyDescriptor(e,r);if(f===void 0){var g=Object.getPrototypeOf(e);return g===null?void 0:t(g,r,h)}else{if("value"in f&&f.writable)return f.value;var y=f.get;return y===void 0?void 0:y.call(h)}},b=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=o(4),l=o(5),a=o(6),s=o(11),i=d(o(12)),n=function(t){function e(){u(this,e);var r=["min","max","value"],h={size:[75,75],interaction:"radial",mode:"relative",min:0,max:1,step:0,value:0};x(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,r,h),this.interaction=this.settings.interaction,this._value=new s(this.settings.min,this.settings.max,this.settings.step,this.settings.value),this.position=new i.Handle(this.settings.mode,this.interaction,[0,this.width],[this.height,0]),this.init(),this.value=this._value.value,this.position.value=this._value.normalized,this.previousAngle=!1,this.emit("change",this.value)}return b(e,t),m(e,{buildInterface:{value:function(){this.background=c.create("circle"),this.screw=c.create("circle"),this.handle=c.create("path"),this.handle2=c.create("path"),this.handleFill=c.create("path"),this.handle2Fill=c.create("path"),this.handleLine=c.create("path"),this.element.appendChild(this.background),this.element.appendChild(this.handle),this.element.appendChild(this.handle2),this.element.appendChild(this.handleFill),this.element.appendChild(this.handle2Fill),this.element.appendChild(this.handleLine),this.element.appendChild(this.screw)}},sizeInterface:{value:function(){this.position.resize([0,this.width],[this.height,0]);var h={x:this.width/2,y:this.height/2},f=Math.min(this.width,this.height);this.background.setAttribute("cx",h.x),this.background.setAttribute("cy",h.y),this.background.setAttribute("r",f/2-f/40),this.screw.setAttribute("cx",h.x),this.screw.setAttribute("cy",h.y),this.screw.setAttribute("r",f/12);var g=this.value,y={start:Math.PI*1.5,end:l.clip(l.scale(g,0,.5,Math.PI*1.5,Math.PI*.5),Math.PI*.5,Math.PI*1.5)},A={start:Math.PI*2.5,end:l.clip(l.scale(g,.5,1,Math.PI*2.5,Math.PI*1.5),Math.PI*1.5,Math.PI*2.5)},I=c.arc(h.x,h.y,f/2-f/40,y.start,y.end),T=c.arc(h.x,h.y,f/2-f/40,A.start,A.end);this.handle.setAttribute("d",I),this.handle.setAttribute("stroke-width",f/20),this.handle.setAttribute("fill","none"),this.handle2.setAttribute("d",T),this.handle2.setAttribute("stroke-width",f/20),this.handle2.setAttribute("fill","none"),I+=" L "+h.x+" "+h.y,this.handleFill.setAttribute("d",I),this.handleFill.setAttribute("fill-opacity","0.3"),T+=" L "+h.x+" "+h.y,this.handle2Fill.setAttribute("d",T),this.handle2Fill.setAttribute("fill-opacity","0.3");var O=void 0;g<.5?O=y.end:O=A.end;var M=h.x+Math.cos(O)*(f/2),_=h.y+Math.sin(O)*(f/2)*-1;this.handleLine.setAttribute("d","M "+h.x+" "+h.y+" L "+M+" "+_),this.handleLine.setAttribute("stroke-width",f/20)}},colorInterface:{value:function(){this.background.setAttribute("fill",this.colors.fill),this.screw.setAttribute("fill",this.colors.accent),this.handle.setAttribute("stroke",this.colors.accent),this.handle2.setAttribute("stroke",this.colors.accent),this.handleFill.setAttribute("fill",this.colors.accent),this.handle2Fill.setAttribute("fill",this.colors.accent),this.handleLine.setAttribute("stroke",this.colors.accent)}},render:{value:function(){var h=this._value.normalized,f={x:this.width/2,y:this.height/2},g=Math.min(this.width,this.height),y={start:Math.PI*1.5,end:l.clip(l.scale(h,0,.5,Math.PI*1.5,Math.PI*.5),Math.PI*.5,Math.PI*1.5)},A={start:Math.PI*2.5,end:l.clip(l.scale(h,.5,1,Math.PI*2.5,Math.PI*1.5),Math.PI*1.5,Math.PI*2.5)},I=c.arc(f.x,f.y,g/2-g/40,y.start,y.end),T=c.arc(f.x,f.y,g/2-g/40,A.start,A.end);this.handle.setAttribute("d",I),this.handle2.setAttribute("d",T),I+=" L "+f.x+" "+f.y,this.handleFill.setAttribute("d",I),T+=" L "+f.x+" "+f.y,this.handle2Fill.setAttribute("d",T);var O=void 0;h<=.5?O=y.end:O=A.end;var M=f.x+Math.cos(O)*(g/2),_=f.y+Math.sin(O)*(g/2)*-1;this.handleLine.setAttribute("d","M "+f.x+" "+f.y+" L "+M+" "+_)}},click:{value:function(){this.mode==="relative"&&(this.previousAngle=!1),this.position.anchor=this.mouse,this.position.value=this._value.normalized,this.move()}},move:{value:function(){if(this.clicked){this.position.update(this.mouse);var h=this.position.value*Math.PI*2;h<0&&(h+=Math.PI*2),this.mode==="relative"&&this.previousAngle!==!1&&Math.abs(this.previousAngle-h)>2&&(this.previousAngle>3?h=Math.PI*2:h=0),this.previousAngle=h;var f=h/(Math.PI*2);this.value=this._value.updateNormal(f),this.mode==="relative"&&(this.position.value=f),this.emit("change",this._value.value),this.render()}}},release:{value:function(){}},value:{get:function(){return this._value.value},set:function(r){this._value.update(r),this.position.value=this._value.normalized,this.emit("change",this._value.value),this.render()}},min:{get:function(){return this._value.min},set:function(r){this._value.min=r}},max:{get:function(){return this._value.max},set:function(r){this._value.max=r}},step:{get:function(){return this._value.step},set:function(r){this._value.step=r}},mode:{get:function(){return this.position.mode},set:function(r){this.position.mode=r}},normalized:{get:function(){return this._value.normalized},set:function(r){this._value.updateNormal(r),this.emit("change",this.value)}}}),e}(a);v.exports=n},function(v,w,o){var d=function(){function n(t,e){for(var r in e){var h=e[r];h.configurable=!0,h.value&&(h.writable=!0)}Object.defineProperties(t,e)}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),m=function n(t,e,r){var h=Object.getOwnPropertyDescriptor(t,e);if(h===void 0){var f=Object.getPrototypeOf(t);return f===null?void 0:n(f,e,r)}else{if("value"in h&&h.writable)return h.value;var g=h.get;return g===void 0?void 0:g.call(r)}},x=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.__proto__=t)},b=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},u=o(4),c=o(6),l=o(17),a=o(9),s=function(n){function t(){b(this,t);var e=["value","note","color"],r={size:[80,80],target:!1,mode:"button",value:0};m(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,arguments,e,r),this.note=this.settings.note,this.color=this.settings.color,this.colors={w:"#fff",b:"#666"},this.init(),this.render()}return x(t,n),d(t,{buildFrame:{value:function(){this.element=u.create("svg"),this.element.setAttribute("width",this.width),this.element.setAttribute("height",this.height),this.parent.appendChild(this.element)}},buildInterface:{value:function(){var r=this;this.pad=u.create("rect"),this.element.appendChild(this.pad),this.interactionTarget=this.pad,a.exists||(this.click=function(){r.piano.interacting=!0,r.piano.paintbrush=!r.state,r.down(r.piano.paintbrush)},this.pad.addEventListener("mouseover",function(){r.piano.interacting&&r.down(r.piano.paintbrush)}),this.move=function(){r.piano.interacting&&r.bend()},this.release=function(){r.piano.interacting=!1},this.pad.addEventListener("mouseup",function(){r.piano.interacting&&r.up()}),this.pad.addEventListener("mouseout",function(){r.piano.interacting&&r.up()}))}},sizeInterface:{value:function(){var r=0;this.pad.setAttribute("x",.5),this.pad.setAttribute("y",.5),this.width>2?this.pad.setAttribute("width",this.width-1):this.pad.setAttribute("width",this.width),this.height>2?this.pad.setAttribute("height",this.height):this.pad.setAttribute("height",this.height),this.pad.setAttribute("rx",r),this.pad.setAttribute("ry",r)}},render:{value:function(){this.state?this.pad.setAttribute("fill",this.colors.accent):this.pad.setAttribute("fill",this.colors[this.color])}}}),t}(l),i=function(n){function t(){b(this,t);var e=["value"],r={size:[500,125],lowNote:24,highNote:60,mode:"button"};m(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,arguments,e,r),this.keyPattern=["w","b","w","b","w","w","b","w","b","w","b","w"],this.paintbrush=!1,this.mode=this.settings.mode,this.range={low:this.settings.lowNote,high:this.settings.highNote},this.range.size=this.range.high-this.range.low+1,this.keys=[],this.toggleTo=!1,this.init(),this.render()}return x(t,n),d(t,{buildFrame:{value:function(){this.element=document.createElement("div"),this.element.style.position="relative",this.element.style.borderRadius="0px",this.element.style.display="block",this.element.style.width="100%",this.element.style.height="100%",this.parent.appendChild(this.element)}},buildInterface:{value:function(){this.keys=[];for(var r=0;r<this.range.size;r++){var h=document.createElement("span"),f=(r+this.range.low)%this.keyPattern.length,g=new s(h,{component:!0,note:r+this.range.low,color:this.keyPattern[f],mode:this.mode},this.keyChange.bind(this,r+this.range.low));g.piano=this,a.exists&&(g.pad.index=r,g.preClick=g.preMove=g.preRelease=function(){},g.click=g.move=g.release=function(){},g.preTouch=g.preTouchMove=g.preTouchRelease=function(){},g.touch=g.touchMove=g.touchRelease=function(){}),this.keys.push(g),this.element.appendChild(h)}a.exists&&this.addTouchListeners()}},sizeInterface:{value:function(){for(var r=0,h=[],f=0;f<this.range.size;f++){h.push(r);var g=(f+this.range.low)%this.keyPattern.length,y=(f+1+this.range.low)%this.keyPattern.length;f+1+this.range.low>=this.range.high||this.keyPattern[g]==="w"&&this.keyPattern[y]==="w"?r+=1:r+=.5}for(var A=r,I=1,T=(this.width-I*2)/A,O=(this.height-I*2)/2,f=0;f<this.keys.length;f++){var M=this.keys[f].parent;M.style.position="absolute",M.style.left=h[f]*T+I+"px",this.keys[f].color==="w"?(M.style.top=I+"px",this.keys[f].resize(T,O*2)):(M.style.zIndex=1,M.style.top=I+"px",this.keys[f].resize(T,O*1.1))}}},colorInterface:{value:function(){this.element.style.backgroundColor=this.colors.mediumLight;for(var r=0;r<this.keys.length;r++)this.keys[r].colors={w:this.colors.light,b:this.colors.dark,accent:this.colors.accent,border:this.colors.mediumLight},this.keys[r].colorInterface(),this.keys[r].render()}},keyChange:{value:function(r,h){var f={note:r};typeof h=="object"?f.state=h.state:f.state=h,this.emit("change",f)}},render:{value:function(){}},addTouchListeners:{value:function(){this.preClick=this.preMove=this.preRelease=function(){},this.click=this.move=this.release=function(){},this.preTouch=this.preTouchMove=this.preTouchRelease=function(){},this.touch=this.touchMove=this.touchRelease=function(){};var r={},h=this.keys;function f(I){return{identifier:I.identifier,clientX:I.clientX,clientY:I.clientY}}function g(){var I={};Object.keys(r).forEach(function(T){var O=r[T],M=document.elementFromPoint(O.clientX,O.clientY),_=M?h[M.index]:null;_?(I[M.index]=T,_.state||_.down()):delete r[T]}),h.forEach(function(T){T.state&&!I[T.pad.index]&&T.up()})}function y(I){I.preventDefault(),I.stopPropagation();for(var T=0;T<I.changedTouches.length;T++){var O=I.changedTouches[T];r[O.identifier]=f(O)}g()}function A(I){I.preventDefault(),I.stopPropagation();for(var T=0;T<I.changedTouches.length;T++){var O=I.changedTouches[T];delete r[O.identifier]}g()}this.element.addEventListener("touchstart",y),this.element.addEventListener("touchmove",y),this.element.addEventListener("touchend",A)}},setRange:{value:function(r,h){this.range.low=r,this.range.high=h,this.empty(),this.buildInterface()}},toggleKey:{value:function(r,h){this.keys[r-this.range.low].flip(h)}},toggleIndex:{value:function(r,h){this.keys[r].flip(h)}}}),t}(c);v.exports=i},function(v,w,o){var d=function(){function h(f,g){for(var y in g){var A=g[y];A.configurable=!0,A.value&&(A.writable=!0)}Object.defineProperties(f,g)}return function(f,g,y){return g&&h(f.prototype,g),y&&h(f,y),f}}(),m=function h(f,g,y){var A=Object.getOwnPropertyDescriptor(f,g);if(A===void 0){var I=Object.getPrototypeOf(f);return I===null?void 0:h(I,g,y)}else{if("value"in A&&A.writable)return A.value;var T=A.get;return T===void 0?void 0:T.call(y)}},x=function(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(h.__proto__=f)},b=function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")},u=o(4),c=o(7),l=o(6),a=o(17),s=o(25),i=o(28),n=o(29),t=o(9),e=function(h){function f(){b(this,f);var g=["value"],y={size:[80,80],target:!1,mode:"toggle",value:0,paddingRow:2,paddingColumn:2};m(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,arguments,g,y),this.index=this.settings.index,this.row=this.settings.row,this.column=this.settings.column,this.matrix=this.settings.matrix,this.paddingRow=this.settings.paddingRow||y.paddingRow,this.paddingColumn=this.settings.paddingColumn||y.paddingColumn,this.interacting=!1,this.paintbrush=!1,this.init(),this.render()}return x(f,h),d(f,{buildFrame:{value:function(){this.element=u.create("svg"),this.element.setAttribute("width",this.width),this.element.setAttribute("height",this.height),this.element.style.top="0px",this.element.style.left="0px",this.element.style.position="absolute",this.parent.appendChild(this.element)}},buildInterface:{value:function(){var y=this;this.pad=u.create("rect"),this.element.appendChild(this.pad),this.interactionTarget=this.pad,t.exists||(this.click=function(){y.matrix.interacting=!0,y.matrix.paintbrush=!y.state,y.down(y.matrix.paintbrush)},this.pad.addEventListener("mouseover",function(){y.matrix.interacting&&y.down(y.matrix.paintbrush)}),this.move=function(){},this.pad.addEventListener("mousemove",function(A){y.matrix.interacting&&(y.offset||(y.offset=c.findPosition(y.element)),y.mouse=c.locateMouse(A,y.offset),y.bend())}),this.release=function(){y.matrix.interacting=!1},this.pad.addEventListener("mouseup",function(){y.matrix.interacting&&y.up()}),this.pad.addEventListener("mouseout",function(){y.matrix.interacting&&y.up()}))}},sizeInterface:{value:function(){this.pad.setAttribute("x",this.paddingColumn/2),this.pad.setAttribute("y",this.paddingRow/2),this.width>2?this.pad.setAttribute("width",this.width-this.paddingColumn):this.pad.setAttribute("width",this.width),this.height>2?this.pad.setAttribute("height",this.height-this.paddingRow):this.pad.setAttribute("height",this.height),this.pad.setAttribute("fill",this.matrix.colors.fill)}},render:{value:function(){this.state?this.pad.setAttribute("fill",this.matrix.colors.accent):this.pad.setAttribute("fill",this.matrix.colors.fill)}}}),f}(a),r=function(h){function f(){b(this,f);var g=["value"],y={size:[400,200],mode:"toggle",rows:5,columns:10};m(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,arguments,g,y),this.active=-1,this.mode=this.settings.mode,this.interval=new n(200,function(){},!1),this.matrix=new s(this.settings.rows,this.settings.columns),this.matrix.ui=this,this.stepper=new i(0,this.columns),this.paddingRow=this.settings.paddingRow,this.paddingColumn=this.settings.paddingColumn,this.init()}return x(f,h),d(f,{buildFrame:{value:function(){this.element=document.createElement("div"),this.element.style.position="relative",this.element.style.display="block",this.element.style.width="100%",this.element.style.height="100%",this.parent.appendChild(this.element),t.exists&&this.addTouchListeners()}},buildInterface:{value:function(){this.cells=[];for(var y=0;y<this.matrix.length;y++){var A=this.matrix.locate(y),I=document.createElement("span");I.style.position="absolute";var T=new e(I,{component:!0,index:y,row:A.row,column:A.column,mode:this.mode,matrix:this,paddingRow:this.paddingRow,paddingColumn:this.paddingColumn},this.keyChange.bind(this,y));t.exists&&(T.pad.index=y,T.preClick=T.preMove=T.preRelease=function(){},T.click=T.move=T.release=function(){},T.preTouch=T.preTouchMove=T.preTouchRelease=function(){},T.touch=T.touchMove=T.touchRelease=function(){}),this.cells.push(T),this.element.appendChild(I)}this.sizeInterface()}},sizeInterface:{value:function(){for(var y=this.width/this.columns,A=this.height/this.rows,I=0;I<this.cells.length;I++){var T=this.cells[I].parent;T.style.left=this.cells[I].column*y+"px",T.style.top=this.cells[I].row*A+"px",this.cells[I].resize(y,A)}}},colorInterface:{value:function(){for(var y=0;y<this.cells.length;y++)this.cells[y].render()}},update:{value:function(){var y=this;this.matrix.iterate(function(A,I,T){y.matrix.pattern[A][I]!==y.cells[T].state&&(y.matrix.pattern[A][I]>0?y.cells[T].turnOn():y.cells[T].turnOff())})}},keyChange:{value:function(y,A){var I=this.matrix.locate(y);this.matrix.pattern[I.row][I.column]=A;var T={row:I.row,column:I.column,state:A};this.emit("change",T)}},render:{value:function(){var y=this;this.stepper.value>=0&&this.matrix.iterate(function(A,I,T){I===y.stepper.value?(y.cells[T].pad.setAttribute("stroke",y.colors.mediumLight),y.cells[T].pad.setAttribute("stroke-width","1"),y.cells[T].pad.setAttribute("stroke-opacity","1")):y.cells[T].pad.setAttribute("stroke","none")})}},start:{value:function(y){this.interval.event=this.next.bind(this),y&&this.interval.ms(y),this.interval.start()}},stop:{value:function(){this.interval.stop()}},next:{value:function(){this.stepper.next(),this.emit("step",this.matrix.column(this.stepper.value).reverse()),this.render()}},addTouchListeners:{value:function(){var y=this;this.preClick=this.preMove=this.preRelease=function(){},this.click=this.move=this.release=function(){},this.preTouch=this.preTouchMove=this.preTouchRelease=function(){},this.touch=this.touchMove=this.touchRelease=function(){},this.currentElement=!1,this.element.addEventListener("touchstart",function(A){var I=document.elementFromPoint(A.targetTouches[0].clientX,A.targetTouches[0].clientY),T=y.cells[I.index];y.paintbrush=!T.state,T.down(y.paintbrush),y.currentElement=I.index,A.preventDefault(),A.stopPropagation()}),this.element.addEventListener("touchmove",function(A){var I=document.elementFromPoint(A.targetTouches[0].clientX,A.targetTouches[0].clientY),T=y.cells[I.index];if(I.index!==y.currentElement){if(y.currentElement>=0){var O=y.cells[y.currentElement];O.up()}T.down(y.paintbrush)}else T.bend();y.currentElement=I.index,A.preventDefault(),A.stopPropagation()}),this.element.addEventListener("touchend",function(A){var I=y.cells[y.currentElement];I.up(),y.interacting=!1,y.currentElement=!1,A.preventDefault(),A.stopPropagation()})}},rows:{get:function(){return this.matrix.rows},set:function(g){this.matrix.rows=g,this.empty(),this.buildInterface(),this.update()}},columns:{get:function(){return this.matrix.columns},set:function(g){this.matrix.columns=g,this.stepper.max=g,this.empty(),this.buildInterface(),this.update()}}}),f}(l);v.exports=r},function(v,w,o){var d=function(l){return l&&l.__esModule?l.default:l},m=function(){function l(a,s){for(var i in s){var n=s[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(a,s)}return function(a,s,i){return s&&l(a.prototype,s),i&&l(a,i),a}}(),x=function(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")},b=d(o(5)),u=d(o(26)),c=function(){function l(a,s){var i=this;x(this,l),this.pattern=[],this.create(a,s),this.toggle={cell:function(n,t){return i.pattern[t][n]=!i.pattern[t][n],i.ui&&i.ui.update(),i.pattern[t][n]},all:function(){i.iterate(function(n,t){i.toggle.cell(t,n)}),i.ui&&i.ui.update()},row:function(n){for(var t=0;t<i.columns;t++)i.toggle.cell(t,n);i.ui&&i.ui.update()},column:function(n){for(var t=0;t<i.rows;t++)i.toggle.cell(n,t);i.ui&&i.ui.update()}},this.set={cell:function(n,t,e){i.pattern[t][n]=e,i.ui&&i.ui.update()},all:function(n){i.pattern=n,i.ui&&i.ui.update()},row:function(n,t){i.pattern[n]=t,i.ui&&i.ui.update()},column:function(n,t){i.pattern.forEach(function(e,r){i.pattern[r][n]=t[r]}),i.ui&&i.ui.update()}},this.rotate={all:function(n){!n&&n!==0&&(n=1),n%=i.pattern[0].length,n<0&&(n=i.pattern[0].length+n);for(var t=0;t<i.rows;t++){var e=i.pattern[t].splice(i.pattern[t].length-n,n);i.pattern[t]=e.concat(i.pattern[t])}i.ui&&i.ui.update()},row:function(n,t){!t&&t!==0&&(t=1),t%=i.pattern[0].length,t<0&&(t=i.pattern[0].length+t);var e=i.pattern[n].splice(i.pattern[n].length-t,t);i.pattern[n]=e.concat(i.pattern[n]),i.ui&&i.ui.update()},column:function(n,t){!t&&t!==0&&(t=1),t%=i.pattern.length,t<0&&(t=i.pattern.length+t);var e=[];i.pattern.forEach(function(h){e.push(h[n])});var r=e.splice(e.length-t,t);e=r.concat(e),i.pattern.forEach(function(h,f){h[n]=e[f]}),i.ui&&i.ui.update()}},this.populate={all:function(n){var t=new u(n);i.iterate(function(e,r){i.pattern[e][r]=b.coin(t.next())}),i.ui&&i.ui.update()},row:function(){var n=arguments[0]===void 0?0:arguments[0],t=arguments[1]===void 0?1:arguments[1],e=new u(t);i.pattern[n].forEach(function(r,h){i.pattern[n][h]=b.coin(e.next())}),i.ui&&i.ui.update()},column:function(){var n=arguments[0]===void 0?0:arguments[0],t=arguments[1]===void 0?1:arguments[1],e=new u(t);i.pattern.forEach(function(r,h){i.pattern[h][n]=b.coin(e.next())}),i.ui&&i.ui.update()}},this.erase={all:function(){i.set.all(0)},row:function(n){i.set.row(n,0)},column:function(n){i.set.column(n,0)}}}return m(l,{create:{value:function(s,i){var n=this;this.pattern=[];for(var t=0;t<s;t++){var e=new Array(i);this.pattern.push(e)}this.iterate(function(r,h){n.pattern[r][h]=!1})}},iterate:{value:function(s,i){for(var n=0,t=0;t<this.rows;t++){i&&i(t);for(var e=0;e<this.columns;e++)s(t,e,n),n++}}},formatAsText:{value:function(){var s=this,i="";return this.iterate(function(n,t){i+=(s.pattern[n][t]?1:0)+" "},function(){i+=`
`}),i}},log:{value:function(){console.log(this.formatAsText())}},update:{value:function(s){this.pattern=s||this.pattern}},length:{get:function(){return this.rows*this.columns}},locate:{value:function(s){return{row:~~(s/this.columns),column:s%this.columns}}},indexOf:{value:function(s,i){return i+s*this.columns}},row:{value:function(a){var s=function(n){return a.apply(this,arguments)};return s.toString=function(){return a.toString()},s}(function(a){for(var s=[],i=0;i<this.columns;i++)s.push(this.pattern[a]?1:0);return s})},column:{value:function(a){var s=function(n){return a.apply(this,arguments)};return s.toString=function(){return a.toString()},s}(function(a){for(var s=[],i=0;i<this.rows;i++)s.push(this.pattern[i][a]?1:0);return s})},rows:{get:function(){return this.pattern.length},set:function(a){var s=this,i=this.pattern.slice(0);this.create(a,this.columns),this.iterate(function(n,t){i[n]&&i[n][t]&&(s.pattern[n][t]=i[n][t])})}},columns:{get:function(){return this.pattern[0].length},set:function(a){var s=this,i=this.pattern.slice(0);this.create(this.rows,a),this.iterate(function(n,t){i[n]&&i[n][t]&&(s.pattern[n][t]=i[n][t])})}}}),l}();v.exports=c},function(v,w,o){var d=function(l){return l&&l.__esModule?l.default:l},m=function(){function l(a,s){for(var i in s){var n=s[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(a,s)}return function(a,s,i){return s&&l(a.prototype,s),i&&l(a,i),a}}(),x=function(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")},b=d(o(5)),u=d(o(27)),c=function(){function l(){var a=arguments[0]===void 0?[0,10,20,30]:arguments[0],s=arguments[1]===void 0?"up":arguments[1],i=arguments[2]===void 0?!1:arguments[2];x(this,l),this.values=a,Array.isArray(this.values)||(this.values=[this.values]),this._mode=s,this.position=i,this.drunkWalk=new u(0,this.values.length-1),this.startValues={up:0,down:this.values.length-1,drunk:~~(this.values.length/2),random:b.ri(this.values.length)},this.position!==!1?this.next=this[this._mode]:this.next=this.first}return m(l,{mode:{get:function(){return this._mode},set:function(a){if(!(a==="up"||a==="down"||a==="random"||a==="drunk")){console.error("The only modes currently allowed are: up, down, random, drunk");return}this._mode=a,this.position&&(this.next=this[this._mode])}},value:{get:function(){return this.values[this.position]},set:function(a){this.position=this.values.indexOf(a)}},first:{value:function(){return this.position!==!1?(this.next=this[this._mode],this.next()):(this.position=this.startValues[this._mode],this.next=this[this._mode],this.value)}},up:{value:function(){return this.position++,this.position%=this.values.length,this.value}},down:{value:function(){return this.position--,this.position<0&&(this.position=(this.position+this.values.length)%this.values.length),this.value}},random:{value:function(){return this.position=b.ri(0,this.values.length),this.value}},drunk:{value:function(){return this.drunkWalk.max=this.values.length,this.drunkWalk.value=this.position,this.position=this.drunkWalk.next(),this.value}}}),l}();v.exports=c},function(v,w,o){var d=function(c){return c&&c.__esModule?c.default:c},m=function(){function c(l,a){for(var s in a){var i=a[s];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(l,a)}return function(l,a,s){return a&&c(l.prototype,a),s&&c(l,s),l}}(),x=function(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")},b=d(o(5)),u=function(){function c(){var l=arguments[0]===void 0?0:arguments[0],a=arguments[1]===void 0?9:arguments[1],s=arguments[2]===void 0?0:arguments[2],i=arguments[3]===void 0?1:arguments[3],n=arguments[4]===void 0?!1:arguments[4];x(this,c),this.min=l,this.max=a,this.value=s,this.increment=i,this.loop=n}return m(c,{next:{value:function(){return this.value+=b.pick(-1*this.increment,this.increment),this.value>this.max&&(this.loop?this.value=this.min:this.value=this.max-this.increment),this.value<this.min&&(this.loop?this.value=this.max:this.value=this.min+this.increment),this.value}}}),c}();v.exports=u},function(v,w,o){var d=function(l){return l&&l.__esModule?l.default:l},m=function(){function l(a,s){for(var i in s){var n=s[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(a,s)}return function(a,s,i){return s&&l(a.prototype,s),i&&l(a,i),a}}(),x=function(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")},b=d(o(5)),u=d(o(27)),c=function(){function l(){var a=arguments[0]===void 0?0:arguments[0],s=arguments[1]===void 0?10:arguments[1],i=arguments[2]===void 0?"up":arguments[2],n=arguments[3]===void 0?!1:arguments[3];x(this,l),this.min=a,this.max=s,this.value=n,this.mode=i,this.drunkWalk=new u(this.min,this.max),this.value!==!1?this.next=this[this._mode]:this.next=this.first}return m(l,{mode:{set:function(a){if(!(a==="up"||a==="down"||a==="random"||a==="drunk")){console.error("The only modes currently allowed are: up, down, random, drunk");return}this._mode=a,this.value&&(this.next=this[this._mode])},get:function(){return this._mode}},first:{value:function(){return this.value!==!1?(this.next=this[this._mode],this.next()):(this.startValues={up:this.min,down:this.max,drunk:~~b.average(this.min,this.max),random:b.ri(this.min,this.max)},this.value=this.startValues[this._mode],this.next=this[this._mode],this.value)}},up:{value:function(){return this.value++,this.value>=this.max&&(this.value=this.min),this.value}},down:{value:function(){return this.value--,this.value<this.min&&(this.value=this.max),this.value}},random:{value:function(){return this.value=b.ri(this.min,this.max),this.value}},drunk:{value:function(){return this.drunkWalk.min=this.min,this.drunkWalk.max=this.max,this.drunkWalk.value=this.value,this.value=this.drunkWalk.next(),this.value}}}),l}();v.exports=c},function(v,w,o){var d=function(){function u(c,l){for(var a in l){var s=l[a];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(c,l)}return function(c,l,a){return l&&u(c.prototype,l),a&&u(c,a),c}}(),m=function(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")},x=o(1).clock,b=function(){function u(c,l,a){m(this,u),this.rate=c,this.on=a,this.clock=x(),this.pattern=[1],this.index=0,this.event=l||function(){},this.on&&this.start()}return d(u,{_event:{value:function(l){this.event(l),this.index++}},stop:{value:function(){this.on=!1,this.interval.clear()}},start:{value:function(){this.on=!0,this.interval=this.clock.callbackAtTime(this._event.bind(this),this.clock.context.currentTime).repeat(this.rate/1e3).tolerance({early:.1,late:1})}},ms:{value:function(l){if(this.on){var a=l/this.rate;this.rate=l,this.clock.timeStretch(this.clock.context.currentTime,[this.interval],a)}else this.rate=l}}}),u}();v.exports=b},function(v,w,o){var d=function(t){return t&&t.__esModule?t:{default:t}},m=function(){function t(e,r){for(var h in r){var f=r[h];f.configurable=!0,f.value&&(f.writable=!0)}Object.defineProperties(e,r)}return function(e,r,h){return r&&t(e.prototype,r),h&&t(e,h),e}}(),x=function t(e,r,h){var f=Object.getOwnPropertyDescriptor(e,r);if(f===void 0){var g=Object.getPrototypeOf(e);return g===null?void 0:t(g,r,h)}else{if("value"in f&&f.writable)return f.value;var y=f.get;return y===void 0?void 0:y.call(h)}},b=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=o(4),l=o(5),a=o(6),s=o(11),i=d(o(12)),n=function(t){function e(){u(this,e);var r=["range"],h={size:[200,200],range:.5,mode:"absolute",speakers:[[.5,.2],[.75,.25],[.8,.5],[.75,.75],[.5,.8],[.25,.75],[.2,.5],[.25,.25]]};x(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,r,h),this.value={x:new s(0,1,0,.5),y:new s(0,1,0,.5)},this.mode=this.settings.mode,this.position={x:new i.Handle(this.mode,"horizontal",[0,this.width],[this.height,0]),y:new i.Handle(this.mode,"vertical",[0,this.width],[this.height,0])},this.position.x.value=this.value.x.normalized,this.position.y.value=this.value.y.normalized,this.speakers=this.settings.speakers,this.range=this.settings.range,this.levels=[],this.init(),this.calculateLevels(),this.render()}return b(e,t),m(e,{buildInterface:{value:function(){this.knob=c.create("circle"),this.element.appendChild(this.knob),this.speakerElements=[];for(var h=0;h<this.speakers.length;h++){var f=c.create("circle");this.element.appendChild(f),this.speakerElements.push(f)}}},sizeInterface:{value:function(){this._minDimension=Math.min(this.width,this.height),this.knobRadius={off:~~(this._minDimension/100)*3+5},this.knobRadius.on=this.knobRadius.off*2,this.knob.setAttribute("cx",this.width/2),this.knob.setAttribute("cy",this.height/2),this.knob.setAttribute("r",this.knobRadius.off);for(var h=0;h<this.speakers.length;h++){var f=this.speakerElements[h],g=this.speakers[h];f.setAttribute("cx",g[0]*this.width),f.setAttribute("cy",g[1]*this.height),f.setAttribute("r",this._minDimension/20+5),f.setAttribute("fill-opacity","0")}this.position.x.resize([0,this.width],[this.height,0]),this.position.y.resize([0,this.width],[this.height,0]),this.calculateLevels(),this.render()}},colorInterface:{value:function(){this.element.style.backgroundColor=this.colors.fill,this.knob.setAttribute("fill",this.colors.mediumLight);for(var h=0;h<this.speakers.length;h++){var f=this.speakerElements[h];f.setAttribute("fill",this.colors.accent),f.setAttribute("stroke",this.colors.accent)}}},render:{value:function(){this.knobCoordinates={x:this.value.x.normalized*this.width,y:this.height-this.value.y.normalized*this.height},this.knob.setAttribute("cx",this.knobCoordinates.x),this.knob.setAttribute("cy",this.knobCoordinates.y)}},click:{value:function(){this.position.x.anchor=this.mouse,this.position.y.anchor=this.mouse,this.move()}},move:{value:function(){this.clicked&&(this.position.x.update(this.mouse),this.position.y.update(this.mouse),this.calculateLevels(),this.emit("change",this.levels),this.render())}},release:{value:function(){this.render()}},normalized:{get:function(){return{x:this.value.x.normalized,y:this.value.y.normalized}}},calculateLevels:{value:function(){var h=this;this.value.x.updateNormal(this.position.x.value),this.value.y.updateNormal(this.position.y.value),this.levels=[],this.speakers.forEach(function(f,g){var y=l.distance(f[0]*h.width,f[1]*h.height,h.position.x.value*h.width,(1-h.position.y.value)*h.height),A=l.clip(1-y/(h.range*h.width),0,1);h.levels.push(A),h.speakerElements[g].setAttribute("fill-opacity",A)})}},moveSource:{value:function(h,f){var g={x:h*this.width,y:f*this.height};this.position.x.update(g),this.position.y.update(g),this.calculateLevels(),this.emit("change",this.levels),this.render()}},moveSpeaker:{value:function(h,f,g){this.speakers[h]=[f,g],this.speakerElements[h].setAttribute("cx",f*this.width),this.speakerElements[h].setAttribute("cy",g*this.height),this.calculateLevels(),this.emit("change",this.levels),this.render()}}}),e}(a);v.exports=n},function(v,w,o){var d=function(){function s(i,n){for(var t in n){var e=n[t];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(i,n)}return function(i,n,t){return n&&s(i.prototype,n),t&&s(i,t),i}}(),m=function s(i,n,t){var e=Object.getOwnPropertyDescriptor(i,n);if(e===void 0){var r=Object.getPrototypeOf(i);return r===null?void 0:s(r,n,t)}else{if("value"in e&&e.writable)return e.value;var h=e.get;return h===void 0?void 0:h.call(t)}},x=function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);s.prototype=Object.create(i&&i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),i&&(s.__proto__=i)},b=function(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")},u=o(5),c=o(4),l=o(6),a=function(s){function i(){b(this,i);var n=["value"],t={size:[80,80]};m(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,arguments,n,t),this._active=!0,this.init(),this.boundUpdate=this.update.bind(this),window.DeviceOrientationEvent?this.orientationListener=window.addEventListener("deviceorientation",this.boundUpdate,!1):(this._active=!1,this.colorInterface())}return x(i,s),d(i,{buildInterface:{value:function(){this.title=c.create("text"),this.circleX=c.create("circle"),this.circleY=c.create("circle"),this.circleZ=c.create("circle"),this.barX=c.create("path"),this.barY=c.create("path"),this.barZ=c.create("path"),this.barX2=c.create("path"),this.barY2=c.create("path"),this.barZ2=c.create("path"),this.barX.setAttribute("opacity","0.8"),this.barY.setAttribute("opacity","0.8"),this.barZ.setAttribute("opacity","0.8"),this.barX2.setAttribute("opacity","0.8"),this.barY2.setAttribute("opacity","0.8"),this.barZ2.setAttribute("opacity","0.8"),this.circleX.setAttribute("cx",this.width*3/12),this.circleX.setAttribute("cy",this.height*3/4),this.circleX.setAttribute("r",this.height/10),this.circleX.setAttribute("opacity","0.4"),this.circleY.setAttribute("cx",this.width*6/12),this.circleY.setAttribute("cy",this.height*3/4),this.circleY.setAttribute("r",this.height/10),this.circleY.setAttribute("opacity","0.4"),this.circleZ.setAttribute("cx",this.width*9/12),this.circleZ.setAttribute("cy",this.height*3/4),this.circleZ.setAttribute("r",this.height/10),this.circleZ.setAttribute("opacity","0.4"),this.barX.setAttribute("stroke-width",Math.round(this.height/30)),this.barY.setAttribute("stroke-width",Math.round(this.height/30)),this.barZ.setAttribute("stroke-width",Math.round(this.height/30)),this.barX.setAttribute("fill","none"),this.barY.setAttribute("fill","none"),this.barZ.setAttribute("fill","none"),this.barX2.setAttribute("stroke-width",Math.round(this.height/30)),this.barY2.setAttribute("stroke-width",Math.round(this.height/30)),this.barZ2.setAttribute("stroke-width",Math.round(this.height/30)),this.barX2.setAttribute("fill","none"),this.barY2.setAttribute("fill","none"),this.barZ2.setAttribute("fill","none"),this.title.setAttribute("x",this.width/2),this.title.setAttribute("y",this.height/3+7),this.title.setAttribute("font-size","15px"),this.title.setAttribute("font-weight","bold"),this.title.setAttribute("letter-spacing","2px"),this.title.setAttribute("opacity","0.7"),this.title.setAttribute("text-anchor","middle"),this.title.textContent="TILT",this.element.appendChild(this.circleX),this.element.appendChild(this.circleY),this.element.appendChild(this.circleZ),this.element.appendChild(this.barX),this.element.appendChild(this.barY),this.element.appendChild(this.barZ),this.element.appendChild(this.barX2),this.element.appendChild(this.barY2),this.element.appendChild(this.barZ2),this.element.appendChild(this.title)}},colorInterface:{value:function(){this._active?(this.element.style.backgroundColor=this.colors.accent,this.circleX.setAttribute("fill",this.colors.light),this.circleY.setAttribute("fill",this.colors.light),this.circleZ.setAttribute("fill",this.colors.light),this.circleX.setAttribute("stroke",this.colors.light),this.circleY.setAttribute("stroke",this.colors.light),this.circleZ.setAttribute("stroke",this.colors.light),this.barX.setAttribute("stroke",this.colors.light),this.barY.setAttribute("stroke",this.colors.light),this.barZ.setAttribute("stroke",this.colors.light),this.barX2.setAttribute("stroke",this.colors.light),this.barY2.setAttribute("stroke",this.colors.light),this.barZ2.setAttribute("stroke",this.colors.light),this.title.setAttribute("fill",this.colors.light)):(this.element.style.backgroundColor=this.colors.fill,this.circleX.setAttribute("fill",this.colors.mediumLight),this.circleY.setAttribute("fill",this.colors.mediumLight),this.circleZ.setAttribute("fill",this.colors.mediumLight),this.circleX.setAttribute("stroke",this.colors.mediumLight),this.circleY.setAttribute("stroke",this.colors.mediumLight),this.circleZ.setAttribute("stroke",this.colors.mediumLight),this.barX.setAttribute("stroke",this.colors.mediumLight),this.barY.setAttribute("stroke",this.colors.mediumLight),this.barZ.setAttribute("stroke",this.colors.mediumLight),this.barX2.setAttribute("stroke",this.colors.mediumLight),this.barY2.setAttribute("stroke",this.colors.mediumLight),this.barZ2.setAttribute("stroke",this.colors.mediumLight),this.title.setAttribute("fill",this.colors.mediumLight))}},update:{value:function(t){if(this._active){var e=t.beta,r=t.gamma,h=t.alpha;r=u.scale(r,-90,90,0,1),e=u.scale(e,-90,90,0,1),h=u.scale(h,0,360,0,1);var f={start:Math.PI*1.5,end:u.clip(u.scale(r,0,.5,Math.PI*1.5,Math.PI*.5),Math.PI*.5,Math.PI*1.5)},g={start:Math.PI*2.5,end:u.clip(u.scale(r,.5,1,Math.PI*2.5,Math.PI*1.5),Math.PI*1.5,Math.PI*2.5)},y=c.arc(this.circleX.cx.baseVal.value,this.circleX.cy.baseVal.value,this.circleX.r.baseVal.value,f.start,f.end),A=c.arc(this.circleX.cx.baseVal.value,this.circleX.cy.baseVal.value,this.circleX.r.baseVal.value,g.start,g.end);this.barX.setAttribute("d",y),this.barX2.setAttribute("d",A),f={start:Math.PI*1.5,end:u.clip(u.scale(e,0,.5,Math.PI*1.5,Math.PI*.5),Math.PI*.5,Math.PI*1.5)},g={start:Math.PI*2.5,end:u.clip(u.scale(e,.5,1,Math.PI*2.5,Math.PI*1.5),Math.PI*1.5,Math.PI*2.5)},y=c.arc(this.circleY.cx.baseVal.value,this.circleY.cy.baseVal.value,this.circleY.r.baseVal.value,f.start,f.end),A=c.arc(this.circleY.cx.baseVal.value,this.circleY.cy.baseVal.value,this.circleY.r.baseVal.value,g.start,g.end),this.barY.setAttribute("d",y),this.barY2.setAttribute("d",A),f={start:Math.PI*1.5,end:u.clip(u.scale(h,0,.5,Math.PI*1.5,Math.PI*.5),Math.PI*.5,Math.PI*1.5)},g={start:Math.PI*2.5,end:u.clip(u.scale(h,.5,1,Math.PI*2.5,Math.PI*1.5),Math.PI*1.5,Math.PI*2.5)},y=c.arc(this.circleZ.cx.baseVal.value,this.circleZ.cy.baseVal.value,this.circleZ.r.baseVal.value,f.start,f.end),A=c.arc(this.circleZ.cx.baseVal.value,this.circleZ.cy.baseVal.value,this.circleZ.r.baseVal.value,g.start,g.end),this.barZ.setAttribute("d",y),this.barZ2.setAttribute("d",A),this.emit("change",{x:r,y:e,z:h})}}},click:{value:function(){window.DeviceOrientationEvent&&(this.active=!this.active)}},active:{get:function(){return this._active},set:function(n){this._active=n,this.colorInterface()}},customDestroy:{value:function(){window.removeEventListener("deviceorientation",this.boundUpdate,!1)}}}),i}(l);v.exports=a},function(v,w,o){var d=function(){function s(i,n){for(var t in n){var e=n[t];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(i,n)}return function(i,n,t){return n&&s(i.prototype,n),t&&s(i,t),i}}(),m=function s(i,n,t){var e=Object.getOwnPropertyDescriptor(i,n);if(e===void 0){var r=Object.getPrototypeOf(i);return r===null?void 0:s(r,n,t)}else{if("value"in e&&e.writable)return e.value;var h=e.get;return h===void 0?void 0:h.call(t)}},x=function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);s.prototype=Object.create(i&&i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),i&&(s.__proto__=i)},b=function(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")},u=o(5),c=o(4),l=o(6),a=function(s){function i(){b(this,i);var n=["value"],t={size:[200,100],numberOfSliders:5,min:0,max:1,step:0,candycane:3,values:[.9,.8,.7,.6,.5,.4,.3,.2,.1],smoothing:0,mode:"bar"};m(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,arguments,n,t),this._numberOfSliders=this.settings.numberOfSliders,this._min=this.settings.min,this._max=this.settings.max,this._step=this.settings.step,this._mode=this.settings.mode;var e=this.settings.values;this.values=e.length>this._numberOfSliders?e.slice(0,this._numberOfSliders):e.concat(Array(this._numberOfSliders-e.length).fill(0)),this.candycane=this.settings.candycane,this.sliderWidth=this.width/this.values.length,this.smoothing=this.settings.smoothing,this.init(),this.render()}return x(i,s),d(i,{buildInterface:{value:function(){this._mode=="line"?(this.line=c.create("polyline"),this.line.setAttribute("stroke-width",2),this.line.setAttribute("fill","none"),this.element.appendChild(this.line),this.fill=c.create("polyline"),this.fill.setAttribute("fill-opacity","0.2"),this.element.appendChild(this.fill),this.nodes=[],this.values.forEach(function(t,e){var r=c.create("circle");r.setAttribute("cx",this.getX(e)),r.setAttribute("cy",this.getY(t)),this.element.appendChild(r),this.nodes.push(r)}.bind(this))):(this.bars=[],this.caps=[],this.values.forEach(function(t,e){var r=c.create("rect"),h=this.getBarX(e),f=this.getY(t);r.setAttribute("x",h-.1),r.setAttribute("y",f),r.setAttribute("width",this.sliderWidth+.2),r.setAttribute("height",this.height),r.setAttribute("opacity",1-(e%this.candycane+1)/(this.candycane+1)),this.element.appendChild(r),this.bars.push(r);var g=c.create("rect");g.setAttribute("x",h-.1),g.setAttribute("y",f),g.setAttribute("width",this.sliderWidth+.2),g.setAttribute("height",5),this.element.appendChild(g),this.caps.push(g)}.bind(this)))}},getBarX:{value:function(t){return this.getX(t)-this.sliderWidth/2}},getX:{value:function(t){return t*this.sliderWidth+this.sliderWidth/2}},getY:{value:function(t){return u.scale(t,this._min,this._max,this.height,0)}},getValueFromY:{value:function(t){var e=u.scale(t,this.height,0,this._min,this._max);return this.adjustValueToStep(e)}},getIndexFromX:{value:function(t){return u.clip(Math.floor(t/this.width*this.values.length),0,this.values.length-1)}},adjustValueToStep:{value:function(t){if(!this._step)return t;var e=t%this._step;return t=t-t%this._step,e>this._step/2&&(t+=this._step),t}},adjustAllValues:{value:function(){this.values.forEach(function(t,e){t=this.adjustValueToStep(t),this.values[e]=u.clip(t,this._min,this._max)}.bind(this))}},getNormalizedValues:{value:function(){this.normalizedValues=[],this.values.forEach(function(t){this.normalizedValues.push(u.scale(t,this._min,this._max,0,1))}.bind(this))}},colorInterface:{value:function(){var t=this;this.element.style.backgroundColor=this.colors.fill,this._mode=="line"?(this.line.setAttribute("stroke",this.colors.accent),this.fill.setAttribute("fill",this.colors.accent),this.nodes.forEach(function(e){e.setAttribute("fill",t.colors.accent)})):(this.bars.forEach(function(e){e.setAttribute("fill",t.colors.accent)}),this.caps.forEach(function(e){e.setAttribute("fill",t.colors.accent)}))}},sizeInterface:{value:function(){this.sliderWidth=this.width/this.values.length,this._mode=="line"&&this.nodes.forEach(function(t){var e=~~(Math.min(this.width,this.height)/50)+2;e=Math.min(this.sliderWidth,e),t.setAttribute("r",e)}.bind(this)),this.render()}},render:{value:function(){var t=this;this._mode=="line"?function(){var e="0 "+t.getY(t.values[0])+", ";t.values.forEach(function(r,h){var f=t.getX(h),g=t.getY(r);e+=f+" "+g+", ",t.nodes[h].setAttribute("cx",t.getX(h)),t.nodes[h].setAttribute("cy",t.getY(r))}),e+=t.width+" "+t.getY(t.values[t.values.length-1]),t.line.setAttribute("points",e),e+=", "+t.width+" "+t.height+", ",e+="0 "+t.height,t.fill.setAttribute("points",e)}():this.values.forEach(function(e,r){t.bars[r].setAttribute("y",t.getY(e)),t.caps[r].setAttribute("y",t.getY(e))})}},click:{value:function(){this.hasMoved=!1,this.previousSlider=!1,this.move()}},move:{value:function(){if(this.clicked){if(this.mouse.x=u.clip(this.mouse.x,0,this.width),this.mouse.y=u.clip(this.mouse.y,0,this.height),this.hasMoved=!0,this.selectedSlider=this.getIndexFromX(this.mouse.x),this.values[this.selectedSlider]=this.getValueFromY(this.mouse.y),this.previousSlider!==!1){var t=Math.abs(this.previousSlider-this.selectedSlider);if(t>1)for(var e=Math.min(this.previousSlider,this.selectedSlider),r=Math.max(this.previousSlider,this.selectedSlider),h=this.values[e],f=this.values[r],g=e;g<r;g++)this.values[g]=u.interp((g-e)/t,h,f),this.values[g]=this.adjustValueToStep(this.values[g])}if(this.smoothing>0)for(var y=1;y<=this.smoothing;y++){var A=this.selectedSlider-y,I=this.selectedSlider+y;if(A>=1){var T=A-1>=0?A-1:0,O=A+1;this.values[A]=(this.values[T]+this.values[O])/2,this.values[A]=this.adjustValueToStep(this.values[A])}if(I<this.values.length-1){var M=I-1,_=I+1<this.values.length?I+1:this.values.length-1;this.values[I]=(this.values[M]+this.values[_])/2,this.values[I]=this.adjustValueToStep(this.values[I])}}this.previousSlider=this.selectedSlider,this.emit("change",this.values),this.render()}}},scan:{value:function(){}},update:{value:function(t,e){this.values[t]=this.adjustValueToStep(e),this.emit("change",{index:t,value:e})}},numberOfSliders:{get:function(){return this.values.length}},min:{get:function(){return this._min},set:function(n){this._min=n,this.adjustAllValues(),this.render()}},max:{get:function(){return this._max},set:function(n){this._max=n,this.adjustAllValues(),this.render()}},step:{get:function(){return this._step},set:function(n){this._step=n,this.adjustAllValues(),this.render()}},setSlider:{value:function(t,e){this.values[t]=this.adjustValueToStep(e),this.values[t]=u.clip(this.values[t],this._min,this._max),this.emit("change",{index:t,value:e})}},setAllSliders:{value:function(t){var e=this.values.length,r=t.length;this.values=t,this.adjustAllValues(),e!=r&&(this.empty(),this.buildInterface(),this.colorInterface()),this.sizeInterface()}}}),i}(l);v.exports=a},function(v,w,o){var d=function(t){return t&&t.__esModule?t:{default:t}},m=function(){function t(e,r){for(var h in r){var f=r[h];f.configurable=!0,f.value&&(f.writable=!0)}Object.defineProperties(e,r)}return function(e,r,h){return r&&t(e.prototype,r),h&&t(e,h),e}}(),x=function t(e,r,h){var f=Object.getOwnPropertyDescriptor(e,r);if(f===void 0){var g=Object.getPrototypeOf(e);return g===null?void 0:t(g,r,h)}else{if("value"in f&&f.writable)return f.value;var y=f.get;return y===void 0?void 0:y.call(h)}},b=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=o(4),l=o(5),a=o(6),s=o(11),i=d(o(12)),n=function(t){function e(){u(this,e);var r=["scale","value"],h={size:[120,20],orientation:"horizontal",mode:"relative",scale:[-1,1],step:0,value:0,hasKnob:!0};x(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,r,h),this.orientation=this.settings.orientation,this.mode=this.settings.mode,this.hasKnob=this.settings.hasKnob,this.step=this.settings.step,this._value=new s(this.settings.scale[0],this.settings.scale[1],this.settings.step,this.settings.value),this.init(),this.position=new i.Handle(this.mode,this.orientation,[0,this.width],[this.height,0]),this.position.value=this._value.normalized,this.value=this._value.value,this.emit("change",this.value)}return b(e,t),m(e,{buildInterface:{value:function(){this.bar=c.create("rect"),this.knob=c.create("circle"),this.element.appendChild(this.bar),this.element.appendChild(this.knob)}},sizeInterface:{value:function(){this.position&&this.position.resize([0,this.width],[this.height,0]),this.width<this.height?this.orientation="vertical":this.orientation="horizontal";var h=void 0,f=void 0,g=void 0,y=void 0,A=void 0,I=void 0;this.knobData={level:0,r:0},this.orientation==="vertical"?(this.thickness=this.width/2,h=this.width/2,f=0,g=this.thickness,y=this.height,this.knobData.r=this.thickness*.8,this.knobData.level=y-this.knobData.r-this.normalized*(y-this.knobData.r*2),A="translate("+this.thickness*-1/2+",0)",I=g/2):(this.thickness=this.height/2,h=0,f=this.height/2,g=this.width,y=this.thickness,this.knobData.r=this.thickness*.8,this.knobData.level=this.normalized*(g-this.knobData.r*2)+this.knobData.r,A="translate(0,"+this.thickness*-1/2+")",I=y/2),this.bar.setAttribute("x",h),this.bar.setAttribute("y",f),this.bar.setAttribute("transform",A),this.bar.setAttribute("rx",I),this.bar.setAttribute("ry",I),this.bar.setAttribute("width",g),this.bar.setAttribute("height",y),this.orientation==="vertical"?(this.knob.setAttribute("cx",h),this.knob.setAttribute("cy",this.knobData.level)):(this.knob.setAttribute("cx",this.knobData.level),this.knob.setAttribute("cy",f)),this.knob.setAttribute("r",this.knobData.r)}},colorInterface:{value:function(){this.bar.setAttribute("fill",this.colors.fill),this.knob.setAttribute("fill",this.colors.accent),this.hasKnob||this.knob.setAttribute("fill","transparent")}},render:{value:function(){this.clicked||(this.knobData.r=this.thickness*.75),this.knob.setAttribute("r",this.knobData.r),this.orientation==="vertical"?(this.knobData.level=this.knobData.r+this._value.normalized*(this.height-this.knobData.r*2),this.knob.setAttribute("cy",this.height-this.knobData.level)):(this.knobData.level=this._value.normalized*(this.width-this.knobData.r*2)+this.knobData.r,this.knob.setAttribute("cx",this.knobData.level))}},click:{value:function(){this.knobData.r=this.thickness*.9,this.position.anchor=this.mouse,this.move()}},move:{value:function(){this.clicked&&(this.position.update(this.mouse),this.value=this._value.updateNormal(this.position.value),this.emit("change",{value:this.value,L:Math.pow(l.scale(this.value,-1,1,1,0),2),R:Math.pow(l.scale(this.value,-1,1,0,1),2)}))}},release:{value:function(){this.render()}},value:{get:function(){return this._value.value},set:function(r){this._value.update(r),this.position.value=this._value.normalized,this.emit("change",{value:this.value,L:Math.pow(l.scale(this.value,-1,1,1,0),2),R:Math.pow(l.scale(this.value,-1,1,0,1),2)}),this.render()}},normalized:{get:function(){return this._value.normalized}}}),e}(a);v.exports=n},function(v,w,o){var d=function(){function i(n,t){for(var e in t){var r=t[e];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(n,t)}return function(n,t,e){return t&&i(n.prototype,t),e&&i(n,e),n}}(),m=function i(n,t,e){var r=Object.getOwnPropertyDescriptor(n,t);if(r===void 0){var h=Object.getPrototypeOf(n);return h===null?void 0:i(h,t,e)}else{if("value"in r&&r.writable)return r.value;var f=r.get;return f===void 0?void 0:f.call(e)}},x=function(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n&&(i.__proto__=n)},b=function(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")},u=o(5),c=o(4),l=o(6),a=function(n,t){this.x=n.x,this.y=n.y,this.xMin=n.xMin||0,this.xMax=n.xMax||1,this.yMin=n.yMin||0,this.yMax=n.yMax||1,this.envelope=t,this.element=c.create("circle"),this.element.setAttribute("fill",this.envelope.colors.accent),this.envelope.element.appendChild(this.element),this.resize=function(){var e=~~(Math.min(this.envelope.width,this.envelope.height)/50)+2;this.element.setAttribute("r",e)},this.move=function(e,r){if(this.x=e||e===0?e:this.x,this.y=r||r===0?r:this.y,this.envelope.nodes.indexOf(this)>=0){var h=this.envelope.nodes.indexOf(this)-1,f=this.envelope.nodes.indexOf(this)+1,g=this.envelope.nodes[h],y=this.envelope.nodes[f],A=h>=0?g.x:0;A=A<this.xMin?this.xMin:A;var I=f<this.envelope.nodes.length?y.x:1;I=I>this.xMax?this.xMax:I,this.x<A&&(this.x=A),this.x>I&&(this.x=I),this.y<this.yMin&&(this.y=this.yMin),this.y>this.yMax&&(this.y=this.yMax)}this.location=this.getCoordinates(),this.element.setAttribute("cx",this.location.x),this.element.setAttribute("cy",this.location.y)},this.getCoordinates=function(){return{x:this.x*this.envelope.width,y:(1-this.y)*this.envelope.height}},this.move(this.x,this.y,!0),this.resize(),this.destroy=function(){this.envelope.element.removeChild(this.element),this.envelope.nodes.splice(this.envelope.nodes.indexOf(this),1)}},s=function(i){function n(){b(this,n);var t=["value"],e={size:[300,150],noNewPoints:!1,points:[{x:.1,y:.4},{x:.35,y:.6},{x:.65,y:.2},{x:.9,y:.4}]};m(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,arguments,t,e),this.points=this.settings.points,this.nodes=[],this.selected=!1,this.init()}return x(n,i),d(n,{buildInterface:{value:function(){var e=this;this.points.forEach(function(r){var h=new a(r,e);e.nodes.push(h)}),this.sortPoints(),this.line=c.create("polyline"),this.line.setAttribute("stroke-width",2),this.line.setAttribute("fill","none"),this.element.appendChild(this.line),this.fill=c.create("polyline"),this.fill.setAttribute("fill-opacity","0.2"),this.element.appendChild(this.fill)}},sizeInterface:{value:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].resize(),this.nodes[e].move();this.render()}},colorInterface:{value:function(){var e=this;this.element.style.backgroundColor=this.colors.fill,this.line.setAttribute("stroke",this.colors.accent),this.fill.setAttribute("fill",this.colors.accent),this.nodes.forEach(function(r){r.element.setAttribute("fill",e.colors.accent)})}},render:{value:function(){this.calculatePath()}},calculatePoints:{value:function(){var e=this;this.points=[],this.nodes.forEach(function(r){e.points.push({x:r.x,y:r.y})})}},calculatePath:{value:function(){var e="0 "+this.nodes[0].location.y+", ";this.nodes.forEach(function(r){e+=r.location.x+" "+r.location.y+", "}),e+=this.width+" "+this.nodes[this.nodes.length-1].location.y,this.line.setAttribute("points",e),e+=", "+this.width+" "+this.height+", ",e+="0 "+this.height,this.fill.setAttribute("points",e)}},click:{value:function(){this.hasMoved=!1,this.selected=this.findNearestNode(),this.nodes[this.selected].move(this.mouse.x/this.width,1-this.mouse.y/this.height),this.scaleNode(this.selected),this.calculatePoints(),this.emit("change",this.points),this.render()}},move:{value:function(){this.clicked&&(this.mouse.x=u.clip(this.mouse.x,0,this.width),this.hasMoved=!0,this.nodes[this.selected].move(this.mouse.x/this.width,1-this.mouse.y/this.height),this.scaleNode(this.selected),this.calculatePoints(),this.emit("change",this.points),this.render())}},release:{value:function(){this.hasMoved||this.nodes[this.selected].destroy(),this.calculatePoints(),this.emit("change",this.points),this.render(),this.selected=null}},findNearestNode:{value:function(){for(var e=null,r=1e4,h=this.mouse.x/this.width,f=1-this.mouse.y/this.height,g=this.nodes,y=0;y<g.length;y++){var A=Math.sqrt(Math.pow(g[y].x-h,2)+Math.pow(g[y].y-f,2));A<r&&(r=A,e=y,h>g[y].x)}return!this.settings.noNewPoints&&r>.07&&(e=this.getIndexFromX(this.mouse.x/this.width),this.nodes.splice(e,0,new a({x:this.mouse.x/this.width,y:1-this.mouse.y/this.height},this)),this.hasMoved=!0),e}},getIndexFromX:{value:function(e){var r=this,h=0;return this.nodes.forEach(function(f,g){r.nodes[g].x<=e&&(h=g+1)}),h}},scaleNode:{value:function(e){var r=u.clip(this.nodes[e].x,0,1),h=u.clip(this.nodes[e].y,0,1);this.nodes[e].move(r,h)}},sortPoints:{value:function(){this.nodes.sort(function(e,r){return e.x>r.x})}},addPoint:{value:function(e,r){var h=this.nodes.length;this.sortPoints();for(var f=0;f<this.nodes.length;f++)if(e<this.nodes[f].x){h=f;break}this.nodes.splice(h,0,new a({x:e,y:r},this)),this.scaleNode(h),this.calculatePoints(),this.emit("change",this.points),this.render()}},scan:{value:function(e){var r=this.getIndexFromX(e),h=r-1;h<0&&(h=0),r>=this.nodes.length&&(r=this.nodes.length-1);var f=this.nodes[h],g=this.nodes[r],y=u.scale(e,f.x,g.x,0,1),A=u.interp(y,f.y,g.y);return this.emit("scan",A),A}},movePoint:{value:function(e,r,h){this.nodes[e].move(r,h),this.scaleNode(e),this.calculatePoints(),this.emit("change",this.points),this.render()}},adjustPoint:{value:function(e,r,h){this.nodes[e].move(this.nodes[e].x+r,this.nodes[e].y+h),this.scaleNode(e),this.calculatePoints(),this.emit("change",this.points),this.render()}},destroyPoint:{value:function(e){this.nodes[e].destroy(),this.calculatePoints(),this.emit("change",this.points),this.render()}},setPoints:{value:function(e){for(var r=this;this.nodes.length;)this.nodes[0].destroy();e.forEach(function(h){r.addPoint(h.x,h.y)}),this.calculatePoints(),this.emit("change",this.points),this.render()}}}),n}(l);v.exports=s},function(v,w,o){var d=function(){function a(s,i){for(var n in i){var t=i[n];t.configurable=!0,t.value&&(t.writable=!0)}Object.defineProperties(s,i)}return function(s,i,n){return i&&a(s.prototype,i),n&&a(s,n),s}}(),m=function a(s,i,n){var t=Object.getOwnPropertyDescriptor(s,i);if(t===void 0){var e=Object.getPrototypeOf(s);return e===null?void 0:a(e,i,n)}else{if("value"in t&&t.writable)return t.value;var r=t.get;return r===void 0?void 0:r.call(n)}},x=function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),s&&(a.__proto__=s)},b=function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")},u=o(7),c=o(6),l=function(a){function s(){b(this,s);var i=[],n={size:[300,150]};m(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,arguments,i,n),this.analyser=null,this.bufferLength=0,this.dataArray=null,this.active=!1,this.source=null,this.init()}return x(s,a),d(s,{buildFrame:{value:function(){this.canvas=new u.SmartCanvas(this.parent),this.element=this.canvas.element}},sizeInterface:{value:function(){this.canvas.resize(this.width,this.height)}},colorInterface:{value:function(){this.canvas.element.style.backgroundColor=this.colors.fill}},render:{value:function(){if(this.active&&requestAnimationFrame(this.render.bind(this)),this.analyser&&this.analyser.getByteFrequencyData(this.dataArray),this.canvas.context.fillStyle=this.colors.fill,this.canvas.context.fillRect(0,0,this.canvas.element.width,this.canvas.element.height),this.source&&this.dataArray)for(var n=this.canvas.element.width/this.bufferLength,t=void 0,e=0,r=this.canvas.element.width/50,h=0;h<this.bufferLength;h=h+r)t=Math.max.apply(null,this.dataArray.subarray(h,h+r)),t/=255,t*=this.canvas.element.height,this.canvas.context.fillStyle=this.colors.accent,this.canvas.context.fillRect(e,this.canvas.element.height-t,n*r,t),e+=n*r}},connect:{value:function(n){this.source&&this.disconnect(),this.analyser=n.context.createAnalyser(),this.analyser.fftSize=2048,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.active=!0,this.source=n,this.source.connect(this.analyser),this.render()}},disconnect:{value:function(){this.source&&this.source.disconnect(this.analyser),this.analyser=null,this.bufferLength=0,this.dataArray=null,this.active=!1,this.source=null}},click:{value:function(){this.active=!this.active&&this.source,this.render()}},customDestroy:{value:function(){this.active=!1}}}),s}(c);v.exports=l},function(v,w,o){var d=function(){function s(i,n){for(var t in n){var e=n[t];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(i,n)}return function(i,n,t){return n&&s(i.prototype,n),t&&s(i,t),i}}(),m=function s(i,n,t){var e=Object.getOwnPropertyDescriptor(i,n);if(e===void 0){var r=Object.getPrototypeOf(i);return r===null?void 0:s(r,n,t)}else{if("value"in e&&e.writable)return e.value;var h=e.get;return h===void 0?void 0:h.call(t)}},x=function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);s.prototype=Object.create(i&&i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),i&&(s.__proto__=i)},b=function(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")},u=o(7),c=o(5),l=o(6),a=function(s){function i(){b(this,i);var n=[],t={size:[30,100]};m(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,arguments,n,t),this.channels=2,this.splitter=null,this.analysers=[],this.bufferLength=0,this.dataArray=null,this.active=!1,this.source=null,this.db=-1/0,this.init(),this.meterWidth=this.canvas.element.width/this.channels,this.render()}return x(i,s),d(i,{buildFrame:{value:function(){this.canvas=new u.SmartCanvas(this.parent),this.element=this.canvas.element}},sizeInterface:{value:function(){this.canvas.resize(this.width,this.height)}},colorInterface:{value:function(){this.canvas.element.style.backgroundColor=this.colors.fill}},render:{value:function(){this.active&&requestAnimationFrame(this.render.bind(this)),this.canvas.context.fillStyle=this.colors.fill,this.canvas.context.fillRect(0,0,this.canvas.element.width,this.canvas.element.height);for(var t=0;t<this.analysers.length;t++){if(this.source){this.analysers[t].getFloatTimeDomainData(this.dataArray);for(var e=0,r=0;r<this.dataArray.length;r++)e+=this.dataArray[r]*this.dataArray[r];e=Math.sqrt(e/this.dataArray.length),this.db=20*Math.log10(e)}else this.db>-200&&this.db!==-1/0?this.db-=1:this.db=-1/0;if(this.db>-70){var h=c.normalize(this.db,-70,5),f=h*h,g=c.scale(f,0,1,this.element.height,0);this.canvas.context.fillStyle=this.colors.accent,this.canvas.context.fillRect(this.meterWidth*t,g,this.meterWidth,this.canvas.element.height-g)}}}},connect:{value:function(t,e){this.source&&this.disconnect(),this.channels=e||t.channelCount||2,this.splitter=t.context.createChannelSplitter(this.channels),this.analysers=[];for(var r=0;r<this.channels;r++){var h=t.context.createAnalyser();h.fftSize=1024,h.smoothingTimeConstant=1,this.splitter.connect(h,r),this.analysers.push(h)}this.bufferLength=this.analysers[0].frequencyBinCount,this.dataArray=new Float32Array(this.bufferLength),this.active=!0,this.meterWidth=this.canvas.element.width/this.channels,this.source=t,this.source.connect(this.splitter),this.render()}},disconnect:{value:function(){this.source&&this.source.disconnect(this.splitter),this.splitter=null,this.analysers=[],this.bufferLength=0,this.dataArray=null,this.active=!1,this.source=null}},click:{value:function(){this.active=!this.active&&this.source,this.render()}},customDestroy:{value:function(){this.active=!1}}}),i}(l);v.exports=a},function(v,w,o){var d=function(){function a(s,i){for(var n in i){var t=i[n];t.configurable=!0,t.value&&(t.writable=!0)}Object.defineProperties(s,i)}return function(s,i,n){return i&&a(s.prototype,i),n&&a(s,n),s}}(),m=function a(s,i,n){var t=Object.getOwnPropertyDescriptor(s,i);if(t===void 0){var e=Object.getPrototypeOf(s);return e===null?void 0:a(e,i,n)}else{if("value"in t&&t.writable)return t.value;var r=t.get;return r===void 0?void 0:r.call(n)}},x=function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),s&&(a.__proto__=s)},b=function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")},u=o(7),c=o(6),l=function(a){function s(){b(this,s);var i=[],n={size:[300,150]};m(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,arguments,i,n),this.analyser=null,this.bufferLength=0,this.dataArray=null,this.active=!1,this.source=null,this.init(),this.render()}return x(s,a),d(s,{buildFrame:{value:function(){this.canvas=new u.SmartCanvas(this.parent),this.element=this.canvas.element}},sizeInterface:{value:function(){this.canvas.resize(this.width,this.height)}},colorInterface:{value:function(){this.canvas.element.style.backgroundColor=this.colors.fill}},render:{value:function(){if(this.active&&requestAnimationFrame(this.render.bind(this)),this.analyser&&this.analyser.getByteTimeDomainData(this.dataArray),this.canvas.context.fillStyle=this.colors.fill,this.canvas.context.fillRect(0,0,this.canvas.element.width,this.canvas.element.height),this.canvas.context.lineWidth=~~(this.height/100+2),this.canvas.context.strokeStyle=this.colors.accent,this.canvas.context.beginPath(),this.source)for(var n=this.canvas.element.width*1/this.bufferLength,t=0,e=0;e<this.bufferLength;e++){var r=this.dataArray[e]/128,h=r*this.canvas.element.height/2;e===0?this.canvas.context.moveTo(t,h):this.canvas.context.lineTo(t,h),t+=n}else this.canvas.context.moveTo(0,this.canvas.element.height/2),this.canvas.context.lineTo(this.canvas.element.width,this.canvas.element.height/2);this.canvas.context.stroke()}},connect:{value:function(n){this.source&&this.disconnect(),this.analyser=n.context.createAnalyser(),this.analyser.fftSize=2048,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.analyser.getByteTimeDomainData(this.dataArray),this.active=!0,this.source=n,this.source.connect(this.analyser),this.render()}},disconnect:{value:function(){this.source&&this.source.disconnect(this.analyser),this.analyser=null,this.bufferLength=0,this.dataArray=null,this.active=!1,this.source=null}},click:{value:function(){this.active=!this.active&&this.source,this.render()}},customDestroy:{value:function(){this.active=!1}}}),s}(c);v.exports=l},function(v,w,o){var d=function(s){return s&&s.__esModule?s.default:s},m=function(s){return s&&s.__esModule?s:{default:s}},x=function(){function s(i,n){for(var t in n){var e=n[t];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(i,n)}return function(i,n,t){return n&&s(i.prototype,n),t&&s(i,t),i}}(),b=function(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")},u=m(o(39)),c=d(o(7)),l=o(1).colors,a=function(){function s(i,n){b(this,s),this.meta={},this.meta.target=i,this.meta.parent=c.parseElement(i),this.meta.colors={},n?(this.meta.attribute=n.attribute||"nexus-ui",this.meta.title=n.name||!1,this.meta.open=n.open||!1):(this.meta.attribute="nexus-ui",this.meta.title=!1,this.meta.open=!1);var t=l();this.meta.colors.accent=t.accent,this.meta.colors.fill=t.fill,this.meta.colors.light=t.light,this.meta.colors.dark=t.dark,this.meta.colors.mediumLight=t.mediumLight,this.meta.colors.mediumDark=t.mediumDark,this.buildInterface(),this.colorInterface()}return x(s,{buildInterface:{value:function(){var n=this;for(this.meta.parent.style.boxSizing="border-box",this.meta.parent.style.userSelect="none",this.meta.parent.style.mozUserSelect="none",this.meta.parent.style.webkitUserSelect="none",this.meta.contents=document.createElement("div");this.meta.parent.childNodes.length>0;)this.meta.contents.appendChild(this.meta.parent.childNodes[0]);this.meta.contents.style.padding="0px",this.meta.contents.style.boxSizing="border-box",this.meta.title&&(this.meta.titleBar=document.createElement("div"),this.meta.titleBar.innerHTML=this.meta.title,this.meta.titleBar.style.fontFamily="arial",this.meta.titleBar.style.position="relative",this.meta.titleBar.style.color="#888",this.meta.titleBar.style.padding="7px",this.meta.titleBar.style.fontSize="12px",this.meta.button=document.createElement("div"),this.meta.button.style.position="absolute",this.meta.button.style.top="5px",this.meta.button.style.right="5px",this.meta.button.innerHTML="-",this.meta.button.style.padding="0px 5px 2px",this.meta.button.style.lineHeight="12px",this.meta.button.style.fontSize="15px",this.meta.button.style.cursor="pointer",this.meta.button.addEventListener("mouseover",function(){n.meta.button.style.backgroundColor=n.meta.colors.mediumDark}),this.meta.button.addEventListener("mouseleave",function(){n.meta.button.style.backgroundColor=n.meta.colors.mediumLight}),this.meta.button.addEventListener("click",function(){n.meta.open?n.hide():n.show()}),this.meta.titleBar.appendChild(this.meta.button),this.meta.parent.appendChild(this.meta.titleBar)),this.meta.parent.appendChild(this.meta.contents);var t=u.section(this.meta.target,this.meta.attribute);for(var e in t)this[e]=t[e]}},colorInterface:{value:function(){this.meta.title&&(this.meta.button.style.backgroundColor=this.meta.colors.mediumLight,this.meta.button.style.border="solid 0px "+this.meta.colors.fill,this.meta.parent.style.border="solid 1px "+this.meta.colors.mediumLight,this.meta.parent.style.backgroundColor=this.meta.colors.light,this.meta.titleBar.style.backgroundColor=this.meta.colors.fill)}},show:{value:function(){this.meta.contents.style.display="block",this.meta.open=!0}},hide:{value:function(){this.meta.contents.style.display="none",this.meta.open=!1}},colorize:{value:function(n,t){for(var e in this)this[e].colorize&&this[e].colorize(n,t);this.meta.colors[n]=t,this.colorInterface()}},empty:{value:function(){for(var n in this)this[n].destroy&&this[n].destroy()}}}),s}();v.exports=a},function(v,w,o){var d=function(a){return a&&a.__esModule?a.default:a};Object.defineProperty(w,"__esModule",{value:!0});var m=d(o(7)),x=d(o(2)),b=function(a,s){var i=a.type;return s[i]?s[i]++:s[i]=1,i+s[i]},u=function(a,s,i){i=i||{};for(var n=0;n<a.attributes.length;n++){var t=a.attributes[n];i[t.nodeName]=t.nodeValue}s=s[0].toUpperCase()+s.slice(1);var e=new x[s](a,i);return e.id=a.id,e},c=function(a,s){s=s||"nexus-ui";for(var i={},n=m.parseElement(a),t={},e=n.getElementsByTagName("*"),r=[],h=0;h<e.length;h++)r.push(e[h]);for(var h=0;h<r.length;h++){var f=r[h].getAttribute(s);if(f){var g=!1;for(var y in x)f.toLowerCase()===y.toLowerCase()&&(g=y);console.log(g);var A=u(r[h],g);if(A.id)t[A.id]=A;else{var I=b(A,i);t[I]=A}}}return t},l=function(a,s,i){var n=document.createElement("div");return i=i||{},s?s=m.parseElement(s):s=document.body,s.appendChild(n),i.target=n,i.size&&(n.style.width=i.size[0]+"px",n.style.height=i.size[1]+"px"),u(n,a,i)};w.element=u,w.section=c,w.add=l},function(v,w,o){var d=function(c){return c&&c.__esModule?c.default:c},m=function(){function c(l,a){for(var s in a){var i=a[s];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(l,a)}return function(l,a,s){return a&&c(l.prototype,a),s&&c(l,s),l}}(),x=function(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")},b=d(o(5)),u=function(){function c(){x(this,c),this.scale=[],this.mode={output:"frequency",input:"step"},this.etmajor=[261.62558,293.664764,329.627563,349.228241,391.995422,440,493.883301,523.25116],this.root=b.mtof(60),this.createScale(0,2,4,5,7,9,11)}return m(c,{note:{value:function(a,s){var i=void 0;return this.mode.output==="frequency"?i=this.frequency(a,s):this.mode.output==="ratio"?i=this.ratio(a,s):this.mode.output==="MIDI"?i=this.MIDI(a,s):i=this.frequency(a,s),i}},frequency:{value:function(a,s){(this.mode.input==="midi"||this.mode.input==="MIDI")&&(this.stepIn+=60);var i=Math.floor(a/this.scale.length);s&&(i+=s);for(var n=a%this.scale.length;n<0;)n+=this.scale.length;var t=this.scale[n],e=this.root*t;return e=e*Math.pow(2,i),e=Math.floor(e*1e11)/1e11,e}},ratio:{value:function(a,s){(this.mode.input==="midi"||this.mode.input==="MIDI")&&(this.stepIn+=60);var i=Math.floor(a/this.scale.length);s&&(i+=s);var n=a%this.scale.length,t=Math.pow(2,i)*this.scale[n];return t=Math.floor(t*1e11)/1e11,t}},MIDI:{value:function(a,s){var i=this.frequency(a,s),n=69+12*Math.log(i/440)/Math.log(2);return n=Math.floor(n*1e9)/1e9,n}},createScale:{value:function(){for(var a=[],s=0;s<arguments.length;s++)a.push(b.mtof(60+arguments[s]));this.loadScaleFromFrequencies(a)}},createJIScale:{value:function(){this.scale=[];for(var a=0;a<arguments.length;a++)this.scale.push(arguments[a])}},loadScaleFromFrequencies:{value:function(a){this.scale=[];for(var s=0;s<a.length;s++)this.scale.push(a[s]/a[0])}},loadScale:{value:function(a){var s=this.scales[a].frequencies;this.loadScaleFromFrequencies(s)}},search:{value:function(a){var s=[];for(var i in this.scales)i.toLowerCase().indexOf(a.toLowerCase())!==-1&&s.push(i);return s}},chord:{value:function(a){for(var s=[],i=0;i<a.length;i++)s.push(this.note(a[i]));return s}}}),c}();v.exports=u},function(v,w){var o=function(){function x(b,u){for(var c in u){var l=u[c];l.configurable=!0,l.value&&(l.writable=!0)}Object.defineProperties(b,u)}return function(b,u,c){return u&&x(b.prototype,u),c&&x(b,c),b}}(),d=function(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")},m=function(){function x(){for(var b=arguments.length,u=Array(b>1?b-1:0),c=1;c<b;c++)u[c-1]=arguments[c];var l=arguments[0]===void 0?3:arguments[0];d(this,x),l<0&&(l=1),this.length=l,this.onVals=u,this.array=new Array(l).fill(0),u.length>0&&this.on.apply(this,u)}return o(x,{select:{value:function(u){return this.array.fill(0),this.array[u]=1,this.array}},flip:{value:function(){for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];var a=this.array;return c.length>0?c.forEach(function(s){s>a.length-1?console.warn("Warning: AnonRadio["+s+"] does not exist"):a[s]=a[s]?0:1}):a.forEach(function(s,i,n){n[i]=s?0:1}),a}},on:{value:function(){for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];var a=this.array;return c.length>0?c.forEach(function(s){s>a.length-1?console.warn("Warning: AnonRadio["+s+"] exceeds size of object"):(a[s]===1&&console.warn("Warning: AnonRadio["+s+"] was already on."),a[s]=1)}):a.fill(1),a}},off:{value:function(){for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];var a=this.array;return c.length>0?c.forEach(function(s){a[s]=0}):a.fill(0),a}}}),x}();v.exports=m},function(v,w,o){var d=o(43);v.exports=d,typeof window<"u"&&(window.WAAClock=d)},function(v,w,o){(function(d){var m={toleranceLate:.1,toleranceEarly:.001},x=function(u,c,l){this.clock=u,this.func=l,this._cleared=!1,this.toleranceLate=u.toleranceLate,this.toleranceEarly=u.toleranceEarly,this._latestTime=null,this._earliestTime=null,this.deadline=null,this.repeatTime=null,this.schedule(c)};x.prototype.clear=function(){return this.clock._removeEvent(this),this._cleared=!0,this},x.prototype.repeat=function(u){if(u===0)throw new Error("delay cannot be 0");return this.repeatTime=u,this.clock._hasEvent(this)||this.schedule(this.deadline+this.repeatTime),this},x.prototype.tolerance=function(u){return typeof u.late=="number"&&(this.toleranceLate=u.late),typeof u.early=="number"&&(this.toleranceEarly=u.early),this._refreshEarlyLateDates(),this.clock._hasEvent(this)&&(this.clock._removeEvent(this),this.clock._insertEvent(this)),this},x.prototype.isRepeated=function(){return this.repeatTime!==null},x.prototype.schedule=function(u){this._cleared=!1,this.deadline=u,this._refreshEarlyLateDates(),this.clock.context.currentTime>=this._earliestTime?this._execute():this.clock._hasEvent(this)?(this.clock._removeEvent(this),this.clock._insertEvent(this)):this.clock._insertEvent(this)},x.prototype.timeStretch=function(u,c){this.isRepeated()&&(this.repeatTime=this.repeatTime*c);var l=u+c*(this.deadline-u);if(this.isRepeated())for(;this.clock.context.currentTime>=l-this.toleranceEarly;)l+=this.repeatTime;this.schedule(l)},x.prototype._execute=function(){this.clock._started!==!1&&(this.clock._removeEvent(this),this.clock.context.currentTime<this._latestTime?this.func(this):(this.onexpired&&this.onexpired(this),console.warn("event expired")),!this.clock._hasEvent(this)&&this.isRepeated()&&!this._cleared&&this.schedule(this.deadline+this.repeatTime))},x.prototype._refreshEarlyLateDates=function(){this._latestTime=this.deadline+this.toleranceLate,this._earliestTime=this.deadline-this.toleranceEarly};var b=v.exports=function(u,c){c=c||{},this.tickMethod=c.tickMethod||"ScriptProcessorNode",this.toleranceEarly=c.toleranceEarly||m.toleranceEarly,this.toleranceLate=c.toleranceLate||m.toleranceLate,this.context=u,this._events=[],this._started=!1};b.prototype.setTimeout=function(u,c){return this._createEvent(u,this._absTime(c))},b.prototype.callbackAtTime=function(u,c){return this._createEvent(u,c)},b.prototype.timeStretch=function(u,c,l){return c.forEach(function(a){a.timeStretch(u,l)}),c},b.prototype.start=function(){if(this._started===!1){var u=this;if(this._started=!0,this._events=[],this.tickMethod==="ScriptProcessorNode"){var c=256;this._clockNode=this.context.createScriptProcessor(c,1,1),this._clockNode.connect(this.context.destination),this._clockNode.onaudioprocess=function(){d.nextTick(function(){u._tick()})}}else if(this.tickMethod!=="manual")throw new Error("invalid tickMethod "+this.tickMethod)}},b.prototype.stop=function(){this._started===!0&&(this._started=!1,this._clockNode.disconnect())},b.prototype._tick=function(){for(var u=this._events.shift();u&&u._earliestTime<=this.context.currentTime;)u._execute(),u=this._events.shift();u&&this._events.unshift(u)},b.prototype._createEvent=function(u,c){return new x(this,c,u)},b.prototype._insertEvent=function(u){this._events.splice(this._indexByTime(u._earliestTime),0,u)},b.prototype._removeEvent=function(u){var c=this._events.indexOf(u);c!==-1&&this._events.splice(c,1)},b.prototype._hasEvent=function(u){return this._events.indexOf(u)!==-1},b.prototype._indexByTime=function(u){for(var c=0,l=this._events.length,a;c<l;)a=Math.floor((c+l)/2),this._events[a]._earliestTime<u?c=a+1:l=a;return c},b.prototype._absTime=function(u){return u+this.context.currentTime},b.prototype._relTime=function(u){return u-this.context.currentTime}}).call(w,o(44))},function(v,w){var o=v.exports={},d,m;function x(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?d=setTimeout:d=x}catch{d=x}try{typeof clearTimeout=="function"?m=clearTimeout:m=b}catch{m=b}})();function u(h){if(d===setTimeout)return setTimeout(h,0);if((d===x||!d)&&setTimeout)return d=setTimeout,setTimeout(h,0);try{return d(h,0)}catch{try{return d.call(null,h,0)}catch{return d.call(this,h,0)}}}function c(h){if(m===clearTimeout)return clearTimeout(h);if((m===b||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(h);try{return m(h)}catch{try{return m.call(null,h)}catch{return m.call(this,h)}}}var l=[],a=!1,s,i=-1;function n(){!a||!s||(a=!1,s.length?l=s.concat(l):i=-1,l.length&&t())}function t(){if(!a){var h=u(n);a=!0;for(var f=l.length;f;){for(s=l,l=[];++i<f;)s&&s[i].run();i=-1,f=l.length}s=null,a=!1,c(h)}}o.nextTick=function(h){var f=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)f[g-1]=arguments[g];l.push(new e(h,f)),l.length===1&&!a&&u(t)};function e(h,f){this.fun=h,this.array=f}e.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function r(){}o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.prependListener=r,o.prependOnceListener=r,o.listeners=function(h){return[]},o.binding=function(h){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(h){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}])})})(Qt);const _t=Jt(gt);function qt(p){let k,v,w,o,d,m,x,b;return{c(){k=D("div"),v=D("div"),w=it("cc:"),o=it(p[0]),d=j(),m=D("div"),x=j(),b=D("div"),F(v,"class","cc-num svelte-c664hw"),F(m,"class","dial"),F(b,"class","label svelte-c664hw"),F(k,"class","dial-wrapper svelte-c664hw")},m(u,c){B(u,k,c),S(k,v),S(v,w),S(v,o),S(k,d),S(k,m),p[3](m),S(k,x),S(k,b),p[4](b)},p(u,[c]){c&1&&yt(o,u[0])},i:N,o:N,d(u){u&&V(k),p[3](null),p[4](null)}}}function te(p,k,v){let w;X(p,et,l=>v(6,w=l));let{cc:o}=k,d,m,x=64;const b=Bt("sendCcHandler");Vt(()=>{let l=new _t.Dial(d,{size:[200,200],interaction:"vertical",min:0,max:127,step:1,value:64});l.colorize("accent","#ff0"),l.colorize("fill","#333"),new _t.Number(m).link(l),l.on("change",s=>{let i=Math.floor(s);w&&(i<x||i>x)&&(b(o,i,String(w)),x=i)})});function u(l){st[l?"unshift":"push"](()=>{d=l,v(1,d)})}function c(l){st[l?"unshift":"push"](()=>{m=l,v(2,m)})}return p.$$set=l=>{"cc"in l&&v(0,o=l.cc)},[o,d,m,u,c]}class ut extends jt{constructor(k){super(),Ft(this,k,te,qt,bt,{cc:0})}}function Mt(p,k,v){const w=p.slice();return w[23]=k[v],w}function Et(p,k,v){const w=p.slice();return w[26]=k[v],w}function Pt(p){let k,v=p[26].name+"",w,o;return{c(){k=D("option"),w=it(v),k.__value=o=p[26].id,k.value=k.__value},m(d,m){B(d,k,m),S(k,w)},p(d,m){m&8&&v!==(v=d[26].name+"")&&yt(w,v),m&8&&o!==(o=d[26].id)&&(k.__value=o,k.value=k.__value)},d(d){d&&V(k)}}}function zt(p){let k,v=p[23].name+"",w,o;return{c(){k=D("option"),w=it(v),k.__value=o=p[23].id,k.value=k.__value},m(d,m){B(d,k,m),S(k,w)},p(d,m){m&8&&v!==(v=d[23].name+"")&&yt(w,v),m&8&&o!==(o=d[23].id)&&(k.__value=o,k.value=k.__value)},d(d){d&&V(k)}}}function St(p){let k,v,w=p[1].inputs+"",o,d,m=p[1].outputs+"",x,b;return{c(){k=D("div"),v=D("p"),o=j(),d=D("p"),x=j(),b=D("div"),F(k,"class","connection-info svelte-1d47iy8"),F(b,"class","console")},m(u,c){B(u,k,c),S(k,v),v.innerHTML=w,S(k,o),S(k,d),d.innerHTML=m,B(u,x,c),B(u,b,c),p[12](b)},p(u,c){c&2&&w!==(w=u[1].inputs+"")&&(v.innerHTML=w),c&2&&m!==(m=u[1].outputs+"")&&(d.innerHTML=m)},d(u){u&&V(k),u&&V(x),u&&V(b),p[12](null)}}}function ee(p){let k,v,w,o,d,m,x,b,u,c,l,a,s,i,n,t,e,r,h,f,g,y,A,I,T,O,M=p[3].inputs,_=[];for(let E=0;E<M.length;E+=1)_[E]=Pt(Et(p,M,E));let z=p[3].outputs,L=[];for(let E=0;E<z.length;E+=1)L[E]=zt(Mt(p,z,E));let R=p[0]&&St(p);return e=new ut({props:{cc:41}}),h=new ut({props:{cc:42}}),g=new ut({props:{cc:43}}),A=new ut({props:{cc:44}}),{c(){k=D("div"),v=D("div"),w=D("button"),w.textContent="refresh",o=j(),d=D("select"),m=D("option"),m.textContent="select input";for(let E=0;E<_.length;E+=1)_[E].c();x=j(),b=D("select"),u=D("option"),u.textContent="select output";for(let E=0;E<L.length;E+=1)L[E].c();c=j(),l=D("input"),a=j(),s=D("label"),s.textContent="Show console",i=j(),R&&R.c(),n=j(),t=D("div"),lt(e.$$.fragment),r=j(),lt(h.$$.fragment),f=j(),lt(g.$$.fragment),y=j(),lt(A.$$.fragment),F(w,"id","refresh"),m.__value="select input",m.value=m.__value,p[5]===void 0&&rt(()=>p[10].call(d)),u.__value="select output",u.value=u.__value,p[4]===void 0&&rt(()=>p[11].call(b)),F(l,"id","show-console"),F(l,"type","checkbox"),F(s,"for","show-console"),F(s,"class","svelte-1d47iy8"),F(v,"class","functions"),F(t,"class","dials svelte-1d47iy8"),F(k,"class","main-wrapper svelte-1d47iy8")},m(E,C){B(E,k,C),S(k,v),S(v,w),S(v,o),S(v,d),S(d,m);for(let P=0;P<_.length;P+=1)_[P]&&_[P].m(d,null);ot(d,p[5],!0),S(v,x),S(v,b),S(b,u);for(let P=0;P<L.length;P+=1)L[P]&&L[P].m(b,null);ot(b,p[4],!0),S(v,c),S(v,l),S(v,a),S(v,s),S(k,i),R&&R.m(k,null),S(k,n),S(k,t),Q(e,t,null),S(t,r),Q(h,t,null),S(t,f),Q(g,t,null),S(t,y),Q(A,t,null),I=!0,T||(O=[W(w,"click",p[7]),W(d,"change",p[8]),W(d,"change",p[10]),W(b,"change",p[9]),W(b,"change",p[11]),W(l,"change",p[6])],T=!0)},p(E,[C]){if(C&8){M=E[3].inputs;let P;for(P=0;P<M.length;P+=1){const G=Et(E,M,P);_[P]?_[P].p(G,C):(_[P]=Pt(G),_[P].c(),_[P].m(d,null))}for(;P<_.length;P+=1)_[P].d(1);_.length=M.length}if(C&40&&ot(d,E[5]),C&8){z=E[3].outputs;let P;for(P=0;P<z.length;P+=1){const G=Mt(E,z,P);L[P]?L[P].p(G,C):(L[P]=zt(G),L[P].c(),L[P].m(b,null))}for(;P<L.length;P+=1)L[P].d(1);L.length=z.length}C&24&&ot(b,E[4]),E[0]?R?R.p(E,C):(R=St(E),R.c(),R.m(k,n)):R&&(R.d(1),R=null)},i(E){I||(J(e.$$.fragment,E),J(h.$$.fragment,E),J(g.$$.fragment,E),J(A.$$.fragment,E),I=!0)},o(E){ht(e.$$.fragment,E),ht(h.$$.fragment,E),ht(g.$$.fragment,E),ht(A.$$.fragment,E),I=!1},d(E){E&&V(k),kt(_,E),kt(L,E),R&&R.d(),q(e),q(h),q(g),q(A),T=!1,at(O)}}}function ie(p,k,v){let w,o,d,m,x,b;X(p,Tt,O=>v(3,w=O)),X(p,mt,O=>v(13,o=O)),X(p,vt,O=>v(14,d=O)),X(p,et,O=>v(4,m=O)),X(p,ft,O=>v(5,x=O)),X(p,Ot,O=>v(15,b=O));let u=!1,c={inputs:"",outputs:""},l=null;const a={144:"NOTE ON",128:"NOTE OFF",176:"CC"},s=O=>v(0,u=O.target.checked),i=(O,M,_)=>{const z=[176,O,M],L=b.outputs.get(_);L&&L.send(z)},n=O=>{console.log("MIDI ready!",O),Y(Ot,b=O,b),f(O),y(O)},t=O=>{console.error(`Failed to get MIDI access - ${O}`)},e=()=>{v(1,c={inputs:"",outputs:""}),Y(vt,d=[],d),Y(mt,o=[],o),f(b)},r=O=>{Y(ft,x=O.target.value,x)},h=O=>{Y(et,m=O.target.value,m)},f=O=>{const M={inputs:[],outputs:[]};for(const _ of O.inputs){const z=_[1];v(1,c.inputs+=`Input port [type:'${z.type}'] id:'${z.id}' manufacturer:'${z.manufacturer}' name:'${z.name}'<br>`,c),Y(vt,d=[...d,z.id],d),M.inputs.push({name:z.name,id:z.id})}for(const _ of O.outputs){const z=_[1];v(1,c.outputs=`Output port [type:'${z.type}'] id:'${z.id}' manufacturer:'${z.manufacturer}' name:'${z.name}'<br>`,c),Y(mt,o=[...o,z.id],o),M.outputs.push({name:z.name,id:z.id})}Y(Tt,w=M,w)};function g(O){let M=`${a[O.data[0]]} message received at timestamp ${O.timeStamp}[${O.data.length} bytes]: `;for(const _ of O.data)M+=`0x${_.toString(16)}`;u&&l.insertAdjacentHTML("afterbegin",M+"<br>")}const y=(O,M)=>{O.inputs.forEach(_=>{_.onmidimessage=g})};navigator.requestMIDIAccess().then(O=>{O.onstatechange=M=>{console.log("Ports changed",M.port.name,M.port.manufacturer,M.port.state)},n(O)},t),Xt("sendCcHandler",i);function A(){x=At(this),ft.set(x)}function I(){m=At(this),et.set(m)}function T(O){st[O?"unshift":"push"](()=>{l=O,v(2,l)})}return[u,c,l,w,m,x,s,e,r,h,A,I,T]}class ne extends jt{constructor(k){super(),Ft(this,k,ie,ee,bt,{})}}new ne({target:document.getElementById("app")});
